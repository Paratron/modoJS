/**
* modoJS 1.1.3
* =========================
* (c) 2013-2015 Christian Engel - wearekiss.com
* modoJS may be freely distributed under the MIT license.
* Documentation under http://docs.modojs.com*/
(function(e){"use strict";function t(e,t){var n;for(n in e){if(t[n]!==void 0)throw Error('Duplicated reference key "'+n+'"');t[n]=e[n]}}function n(e){return e.noAdd===void 0}var i,o,s,a;i={},a=jQuery,o=e.modo,i.VERSION="1.0.0",i.cssPrefix="mdo-",s={count:0,domRoot:null,getId:function(){return this.count+=1,i.cssPrefix+this.count}},i.init=function(e,t){var n;if(void 0===t?(n=a("body"),t=e):n=e instanceof a?e:a(e),n.addClass(i.cssPrefix+"root"),s.domRoot=n,!i.isElement(t))throw Error("Root element no modo element");return n.append(t.el),i.trigger("init"),this},i._libraries={},i._stats={},i._stat=function(e){return i._stats[e]?(i._stats[e]++,void 0):(i._stats[e]=1,void 0)},i.setLoadCallback=function(e,t){var n,o;return o=i.isElement(e)?e.constructor.elementName:e,n=i._libraries[o]?i._libraries[o]:i._libraries[o]={u:[],l:0,c:[]},n.l===!0?t():(n.c.push(t),void 0)},i.defineElement=function(e,t,n){if(this[e]!==void 0)throw Error('Cannot define modo element "'+e+'". Its already defined');return n.elementName=e,n.classNames=t,this[e]=n,{inheritPrototype:function(){var e,t;for(t=[],e=0;arguments.length>e;e++)t.push(i[arguments[e]].prototype);return _.extend.apply(window,[n.prototype].concat(t)),this},extendPrototype:function(e){return _.extend(n.prototype,e),this},requireLibrary:function(t){var n=[];if(!_.isArray(t))throw Error("Invalid call");_.isArray(t[0])||(t=[t]);var o,s;return i._libraries[e]?(o=i._libraries[e],o.u=_.pluck(t,0)):o=i._libraries[e]={u:_.pluck(t,0),l:0,c:[]},s=function(){o.l++,o.l>=o.u.length&&(o.l=!0,_.each(o.c,function(e){e()}))},_.each(t,function(e){_.isUndefined(e[1])&&n.push(e[0])}),n.length?(void 0!==window.require?(o.l=o.u.length,window.require(n,s)):_.each(n,function(e){var t=document.createElement("script");t.onload=s,document.head.appendChild(t),t.src=e}),this):(o.l=o.u.length,s(),this)}}},i.waitForDom=function(e,t){return i.isInDom(e)?(e._waitForDom&&(clearInterval(e._waitForDom),delete e._waitForDom),t()):e._waitForDom?this:(e._waitForDom=setInterval(function(){i.waitForDom(e,t,!0)},100),this)},i.noConflict=function(){e.modo=o},i.isElement=function(e){return"object"==typeof e&&e?void 0!==e.modoId&&void 0!==e.el:!1},i.isGetSetElement=function(e){return this.isElement(e)?"function"==typeof e.get&&"function"==typeof e.set:!1},i.isDOM=function(e){return e===void 0?!1:void 0!==e.nodeName||e instanceof a},i.isInDom=function(e){return a.contains(document.documentElement,e.el[0])},i.getRootElement=function(){return s.domRoot?s.domRoot:a("body")},i.reset=function(){s.count=0,s.domRoot=null,i.cssPrefix="mdo-"},i.generate=function(){var e,o,s,a,r,l,d=arguments[0],c=arguments[1],u=[],f={},h={silent:!0},m=!1;for(d instanceof Array||(d=[d],m=!0),a=0;d.length>a;a++)if(e=d[a],i.isElement(e))u.push(e);else{if(e instanceof Object){o=!1;for(r in e)if(e.hasOwnProperty(r)){if(i.isElement(e[r])){u.push(e),o=!0;break}break}if(o)continue}if(void 0===i[e.type])throw Error('Unknown modo element "'+e.type+'"');if(s=new i[e.type](e.params),u.push(s),void 0!==e.ref){if(m=!1,void 0!==f[e.ref])throw Error('Duplicated reference key "'+e.ref+'"');f[e.ref]=s}if(e.flexible&&s.setFlexible(),e.on)for(r in e.on)e.on.hasOwnProperty(r)&&s.on(r,e.on[r]);if(e.once)for(r in e.once)e.once.hasOwnProperty(r)&&s.once(r,e.once[r]);if(e.hidden&&s.hide(),e.disabled&&"function"==typeof s.disable&&s.disable(),e.children instanceof Array&&e.children.length){if("function"!=typeof s.add)throw Error('Element of type "'+e.type+"\" doesn't support the addition of children");if(o=i.generate(e.children,!0),"function"==typeof s.getElements)for(r=0;e.children.length>r;r++)void 0===o[0][r].noAdd&&(e.children[r].key!==void 0?(l={},l[e.children[r].key]=o[0][r],s.add.call(s,l,h)):s.add.call(s,o[0][r],h));else o[0].push(h),s.add.apply(s,_.filter(o[0],n));o[1].length&&(m=!1),t(o[1],f)}if(e.children instanceof Object&&!(e.children instanceof Array)){if("function"!=typeof s.add)throw Error('Element of type "'+e.type+"\" doesn't support the addition of children");if("function"!=typeof s.getElements)throw Error('Element of type "'+e.type+"\" doesn't support keyed children.");d=[],l=[];for(r in e.children)e.children.hasOwnProperty(r)&&(d.push(e.children[r]),l.push(r));for(o=i.generate(d,!0),r=0;l.length>r;r++)d={},d[l[r]]=o[0][r],s.add.call(s,d,h);t(o[1],f)}if(m)return s}return c?[u,f]:f},i.Element=function(e){e=e||{};var t,n={className:e.className||"",dataAttributes:e.dataAttributes||{}};this.el=e.el||a("<div></div>"),this.el.addClass(i.cssPrefix+i.Element.classNames[0]),this.modoId=s.getId(),this.visible=!0,this.showEffect=e.showEffect||null,this.hideEffect=e.hideEffect||null,e._options&&(this._options=e._options),n.className&&this.el.addClass(n.className),this.el.attr("id",this.modoId);for(t in n.dataAttributes)n.dataAttributes.hasOwnProperty(t)&&this.el.attr("data-"+t,n.dataAttributes[t]);i._stat("Element")},i.Element.classNames=["element","flexible","disabled"],_.extend(i.Element.prototype,Backbone.Events,{setFlexible:function(e){return e===void 0&&(e=!0),e?this.el.addClass(i.cssPrefix+i.Element.classNames[1]):this.el.removeClass(i.cssPrefix+i.Element.classNames[1]),this},show:function(e){var t;return e=e||{},t=e.silent,this.visible?this:(e.effect?this.el[e.effect].apply(this.el,e.effectArgs||[]):this.showEffect?this.el[this.showEffect.effect].apply(this.el,this.showEffect.effectArgs||[]):this.el.show(),this.visible=!0,t||this.trigger("show"),this)},hide:function(e){var t;return e=e||{},t=e.silent,this.visible?(e.effect?this.el[e.effect].apply(this.el,e.effectArgs||[]):this.hideEffect?this.el[this.hideEffect.effect].apply(this.el,this.hideEffect.effectArgs||[]):this.el.hide(),this.visible=!1,t||this.trigger("hide"),this):this},addClass:function(e,t){return void 0===t&&(t=!0),e=e.split(" "),t&&(e=_.map(e,function(e){return i.cssPrefix+e})),this.el.addClass(e.join(" ")),this},removeClass:function(e,t){return void 0===t&&(t=!0),e=e.split(" "),t&&(e=_.map(e,function(e){return i.cssPrefix+e})),this.el.removeClass(e.join(" ")),this},addClassTemporary:function(e,t,n){var i=this;return this.addClass(e,n),setTimeout(function(){i.removeClass(e,n)},t),this}}),_.extend(i,Backbone.Events),"function"==typeof define&&define.amd&&define("modo",function(){return i}),e.modo=i})(this),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo")),e.defineElement("Button",["button"],function(n){function i(e,t){return t?modo.cssPrefix+modo.Button.classNames[e]:modo.Button.classNames[e]}n=n||{};var o={label:n.label||"",tooltip:n.tooltip||""};e.Element.call(this,_.extend(n,{el:t('<button title="'+o.tooltip+'">'+o.label+"</button>")})),this.addClass(i(0)),this.disabled=!1;var s=this;this.el.on("click",function(e){this.disabled||s.trigger("click",e)}),n.disabled&&this.disable({silent:!0}),e._stat("Button")}).inheritPrototype("Element").extendPrototype({setLabel:function(e,t){return void 0!==e&&null!==e&&this.el.html(e),void 0!==t&&this.el.attr("title",t),this.trigger("update"),this},enable:function(){return this.removeClass(modo.Element.classNames[2]),this.el.attr("disabled",!1),this.disabled=!1,this.trigger("enabled"),this},disable:function(){return this.addClass(modo.Element.classNames[2]),this.el.attr("disabled",!0),this.disabled=!0,this.trigger("disabled"),this},focus:function(){this.el.focus()},blur:function(){this.el.blur()}}),"undefined"!=typeof exports?exports=e.Button:"function"==typeof define&&define("modo.Button",function(){return e.Button})}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo")),e.defineElement("Container",["container","container-layout-"],function(t){t=t||{},e.Element.call(this,t);var n=["normal","inline","block"],i={layout:t.layout||n[0]};-1===_.indexOf(n,i.layout)&&(i.layout=n[0]),this.addClass(e.Container.classNames[0]),this.addClass(e.Container.classNames[1]+i.layout),e._stat("Container")}).inheritPrototype("Element").extendPrototype({add:function(){var e,t,n=this,i=!1,o=[];for(t=0;arguments.length>t;t++)if(e=arguments[t],modo.isElement(e)){if(e.modoId===this.modoId)throw Error("You can't add a container to itself");n.el.append(e.el),o.push(e)}else if(modo.isDOM(e))this.el.append(e),o.push(e);else{if(e===void 0)throw Error("Illegal object passed");i=e.silent}if(!i)for(t=0;o.length>t;t++)this.trigger("add",o[t]);return this},remove:function(){var e,n,i=[],o=!1;for(n=0;arguments.length>n;n++)e=arguments[n],modo.isElement(e)?(t("#"+e.modoId,this.el).remove(),i.push(e)):modo.isDOM(e)?(t(e,this.el).remove(),i.push(e)):o=e.silent;if(!o)for(n=0;i.length>n;n++)this.trigger("remove",i[n]);return this}}),e.Container.INLINE="inline",e.Container.NORMAL="normal",e.Container.BLOCK="block","undefined"!=typeof module?module.exports=modo.Container:"function"==typeof define&&define("modo.Container",function(){return modo.Container})}(),function(){"use strict";var e,t,n;"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo")),n=[],e.defineElement("FlexContainer",["flexcontainer","flex-","flex-fallback","flex-js-fallback"],function(t){t=t||{},e.Container.call(this,t);var i={direction:t.direction===e.FlexContainer.VERTICAL?e.FlexContainer.VERTICAL:e.FlexContainer.HORIZONTAL};this.addClass(e.FlexContainer.classNames[0]),this.addClass(e.FlexContainer.classNames[1]+i.direction),e.FlexContainer.fallback&&this.addClass(e.FlexContainer.classNames[2]),e.FlexContainer.jsFallback&&this.addClass(e.FlexContainer.classNames[3]),this.direction=function(t){if(t!==e.FlexContainer.HORIZONTAL&&t!==e.FlexContainer.VERTICAL)throw Error("Illegal direction value");return this.removeClass(e.FlexContainer.classNames[1]+i.direction),i.direction=t,this.addClass(e.FlexContainer.classNames[1]+i.direction),this},this.update=function(){var t,n,o,s,a;t=e.cssPrefix+e.Element.classNames[1],n=[],o=[],s=0,_.each(this.el.children(),function(a){var r;return r=$(a),r.hasClass(t)?(o.push(r),void 0):(n.push(r),i.direction===e.FlexContainer.VERTICAL?(s+=r.outerHeight(),void 0):(s+=r.outerWidth(),void 0))}),a=i.direction===e.FlexContainer.VERTICAL?(this.el.height()-s)/o.length:(this.el.width()-s)/o.length,_.each(o,function(t){var n;n=i.direction===e.FlexContainer.VERTICAL?{height:a,width:"100%"}:{height:"100%",width:a},$(t).css(n)})},n.push(this),e.FlexContainer.jsFallback&&this.update(),e._stat("FlexContainer")}).inheritPrototype("Container").extendPrototype({}),e.FlexContainer.HORIZONTAL="horizontal",e.FlexContainer.VERTICAL="vertical",e.FlexContainer.updateAll=function(){_.each(n,function(e){e.update()})},e.FlexContainer.jsFallback=!1,e.FlexContainer.fallback=!1,"undefined"!=typeof Modernizr?e.FlexContainer.fallback=!Modernizr.flexbox:(t=document.createElement("div"),t.style.msFlexBasis===void 0&&t.style.webkitFlexBasis===void 0&&t.style.mozFlexBasis===void 0&&t.style.flexBasis===void 0&&(e.FlexContainer.fallback=!0)),e.FlexContainer.fallback&&(t=document.createElement("div"),t.style.MozBoxFlex===void 0&&t.style.WebkitBoxFlex===void 0&&t.style.BoxFlex===void 0&&(e.FlexContainer.jsFallback=!0,$(window).on("resize",e.FlexContainer.updateAll),e.on("init",function(){e.FlexContainer.updateAll()})))}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo"));var n;(function(){var e=document.createElement("input");n=!("placeholder"in e)})(),e.defineElement("InputText",["inputtext","inputtext-","placeholded","autogrow","filled"],function(i){i=i||{};var o,s,a,r;o={type:i.type||"text",placeholder:i.placeholder||"",changeThreshold:void 0!==i.changeThreshold?parseInt(i.changeThreshold,10):500,timeout:null,lastValue:null,value:i.value||"",boundModel:null,boundModelKey:null,maxlength:i.maxlength||null,autogrow:i.autogrow||!1},e.Element.call(this,_.extend(i,{el:t("textarea"!==o.type?'<input type="'+o.type+'">':"<textarea></textarea>")})),this.addClass(e.InputText.classNames[0]),this.addClass(e.InputText.classNames[1]+o.type),i.maxlength&&this.el.attr("maxlength",i.maxlength),"textarea"===o.type&&this.el.attr("rows",1),s=this,this.hasFocus=!1,a={13:"enter",27:"escape",18:"alt",17:"ctrl",16:"shift",38:"up",40:"down",37:"left",39:"right",8:"backspace",46:"del",35:"end",36:"pos1",45:"paste",9:"tab"},r=_.debounce(function(){s.trigger("focus")},100),o.autogrow&&"textarea"===o.type&&(this.addClass(e.InputText.classNames[3]),e.waitForDom(this,function(){var e=s.el,n=t("<div></div>");if(n.css({display:"none","word-wrap":"break-word","white-space":"normal",padding:e.css("padding"),width:e.width(),"font-family":e.css("font-family"),"font-size":e.css("font-size"),"line-height":e.css("line-height")}),e.after(n),e.on("keyup change",function(){return e[0].value?(n.html((e[0].value+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />")+".<br/>."),e.height(n.height()),void 0):(e.css("height","auto"),void 0)}),0===e.width())var i=setInterval(function(){var t=e.width();t&&(n.css("width",t),clearInterval(i))},500)})),this.el.on("keydown",function(t){s.trigger("keydown",t),s.trigger("keydown:"+t.keyCode,t),a[t.keyCode]!==void 0&&s.trigger("keydown:"+a[t.keyCode],t),s.el.val()?(s.addClass(e.InputText.classNames[4]),s.trigger("filled")):(s.removeClass(e.InputText.classNames[4]),s.trigger("empty")),o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(function(){o.value=s.el.val(),o.lastValue!==o.value&&(o.lastValue=o.value,o.boundModel&&o.boundModelKey&&o.boundModel.set(o.boundModelKey,o.value),s.trigger("change",s.el.val()))},o.changeThreshold)}).on("blur",function(){s.hasFocus=!1,n&&o.placeholder&&!s.el.val()&&(s.el.val(o.placeholder),s.addClass(e.InputText.classNames[2])),s.trigger("blur")}).on("focus",function(){s.hasFocus=!0,n&&s.el.val()===o.placeholder&&(s.el.val(""),s.removeClass(e.InputText.classNames[2])),r()}).on("click",function(){r()}),o.placeholder&&this.el.attr("placeholder",o.placeholder),o.value&&(this.el.val(o.value),o.lastValue=o.value),n&&!o.value&&o.placeholder&&(this.el.val(o.placeholder),this.addClass(e.InputText.classNames[2])),this.set=function(t,i){var s;return i=i||{},s=i.silent,o.value=t,!t&&n&&o.placeholder&&(t=o.placeholder,this.addClass(e.InputText.classNames[2])),this.el.val(t),o.value!==o.lastValue&&(o.lastValue=t,s||this.trigger("change",t)),this},this.bindToModel=function(e,t,n,i){if(!(e instanceof Backbone.Model))throw Error("Can only bind to a backbone model.");if(o.boundModel&&this.stopListening(o.boundModel),o.boundModel=e,o.boundModelKey=t,t)o.value=e.get(t),this.listenTo(e,"change:"+t,function(){s.set(e.get(t))});else{if("function"!=typeof n)throw Error("Trying to bind to model, but no modelKey and no processingFunction given");this.listenTo(e,"change",function(){s.set(n.call(s,e))}),o.value=n(e)}i||this.set(o.value)},i.model&&this.bindToModel(i.model,i.modelKey,"function"==typeof i.value?i.value:null,!0),i.disabled&&this.disable(),e._stat("InputText")}).inheritPrototype("Element").extendPrototype({get:function(){return this.el.val()},blur:function(){return this.el.blur(),this.trigger("blur"),this},focus:function(){return this.el.focus(),this.trigger("focus"),this},select:function(e,t){var n=this.el.val();return void 0===e&&void 0===t?(this.el[0].select(),this):(void 0===t&&(t=0),e||(e=0),t+=0>t?n.length:e,this.el[0].setSelectionRange(e,t),this)},disable:function(){return this.el.attr("disabled",!0).addClass(e.cssPrefix+"disabled"),this.trigger("disable"),this},enable:function(){return this.el.attr("disabled",!1).removeClass(e.cssPrefix+"disabled"),this.trigger("enable"),this}}),e.InputText.SEARCH="search","undefined"!=typeof exports?exports=e.InputText:"function"==typeof define&&define("modo.InputText",function(){return e.InputText})}(),function(){"use strict";function e(e,n){return void 0!==n?t.Label.classNames[e]:t.cssPrefix+t.Label.classNames[e]}var t,n;n=jQuery,"undefined"!=typeof modo?t=modo:"function"==typeof require&&(t=require("modo")),t.defineElement("Label",["label"],function(n){n=n||{},t.Element.call(this,n),this.addClass(e(0,!0));var i=this,o={};this.bindToModel=function(e,t,s,a){if(!(e instanceof Backbone.Model))throw Error("Can only bind to a backbone model.");if(o.boundModel&&this.stopListening(o.boundModel),o.boundModel=e,o.boundModelKey=t,t)n.value=e.get(t),this.listenTo(e,"change:"+t,function(){i.set(e.get(t))});else{if("function"!=typeof s)throw Error("Trying to bind to model, but no modelKey and no processingFunction given");this.listenTo(e,"change",function(){i.set(s.call(i,e))}),o.value=s(e)}return a||this.set(o.value),this},n.model&&this.bindToModel(n.model,n.modelKey,"function"==typeof n.value?n.value:null),this.el.html("function"!=typeof n.value?n.value||"":""),t._stat("Label")}).inheritPrototype("Element").extendPrototype({set:function(e,t){var n;return t=t||{silent:!1},n=t.silent,this.el.html(e),n||this.trigger("change",e),this},get:function(){return this.el.html()}}),"undefined"!=typeof exports?exports=modo.Label:"function"==typeof define&&define("Label",[],function(){return modo.Label})}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo")),e.defineElement("List",["list","list-item","list-empty-element","list-focus"],function(n){function i(){var n,i,o;null!==c.focusIndex&&(i=e.cssPrefix+e.List.classNames[1],o=e.cssPrefix+e.List.classNames[3],n=t(u.el.find("."+i).eq(c.focusIndex)),u.el.find("."+o).removeClass(o),n.addClass(o),u.el.scrollTop(n.offset().top-(u.el.offset().top-u.el.scrollTop())-n.height()))}function o(e,t){if("down"===t)return null===c.focusIndex&&(c.focusIndex=-1),c.focusIndex++,c.focusIndex>=d.length&&(c.focusIndex=0),i(),void 0;if("up"===t)return null===c.focusIndex&&(c.focusIndex=d.length),c.focusIndex--,0>c.focusIndex&&(c.focusIndex=d.length-1),i(),void 0;if(!(t.length>1)){clearTimeout(s),c.keyboardInput+=t;var n,o,a,r=0;o=c.keyboardInput,a=o.length,n=_.find(d,function(e){return r++,e.substr(0,a)===o}),n&&(c.focusIndex=r-1,i()),s=setTimeout(function(){c.keyboardInput=""},1e3)}}n=n||{},e.Element.call(this,n),this.addClass(e.List.classNames[0]);var s,a,r,l,d,c={data:n.data,collector:n.collector||function(e,t){return t?e.filter(function(){return!0}):e},updateOn:n.updateOn||["add","change","remove","sort","reset"],itemRender:n.itemRender||function(e){if(e){if("string"==typeof e||"number"==typeof e)return"<div>"+e+"</div>";for(var t in e)if("_m"!==t)break;return"<div>"+(""+e[t])+"</div>"}},searchStringRender:n.searchStringRender||function(e){if(e){var t;if("string"==typeof e||"number"==typeof e)t=e;else{for(var n in e)if("_m"!==n)break;t=""+e[n]}return t.toLowerCase().replace(/ /gm,"")}},itemEvents:n.itemEvents||{},emptyRender:n.emptyRender||function(){return""},keyboard:n.keyboard||!1,keyboardInput:"",keyboardSearchStrings:null,focusIndex:null},u=this,f=e.cssPrefix+e.List.classNames[1];this.length=0,this.update=function(t){var o,s,u,h,m,p,g="",v=!1,y=[];if(t=t||{},o=t.silent,m=c.keyboard&&"function"==typeof c.searchStringRender,m&&(d=[]),l=c.collector(c.data,c.data instanceof Backbone.Collection),r=[],"function"==typeof n.data&&(c.data=n.data()),l instanceof Backbone.Collection)l.each(function(e){r.push(e.id||e.cid)});else if(l instanceof Array)v=!0;else{var b=[];_.each(l,function(e,t){r.push(t),b.push(e)}),l=b}if(l&&l.length)for(this.length=l.length,s=0;l.length>s;s++)h="",l[s]instanceof Backbone.Model?(p=_.extend(l[s].toJSON(),{_m:l[s]}),u=c.itemRender.call(this,p,s),m&&d.push(c.searchStringRender.call(this,p,s))):(u=c.itemRender.call(this,l[s],s,v?void 0:r[s]),m&&d.push(c.searchStringRender.call(this,l[s],s,v?void 0:r[s]))),e.isElement(u)?(y.push([u,s]),g+="<div></div>"):g+="<"!==u.substr(0,1)?"<div>"+u+"</div>":u;else this.length=0,u=c.emptyRender(),"<"!==u.substr(0,1)&&(u="<div>"+u+"</div>"),g+=u;for(this.el.html(g),a=this.el.children("*"),a.addClass(f),l&&l.length||this.el.children(":first").addClass(e.cssPrefix+e.List.classNames[2]),a=this.el.find("."+e.cssPrefix+e.List.classNames[1]),s=0;y.length>s;s++)a.eq(y[s][1]).append(y[s][0].el);return i(),o||this.trigger("update"),this},this.getItemByKey=function(t){var n;if(l instanceof Array){if("number"!=typeof t)throw Error("You can only pass numeric keys to select items from arrays");n=t}else if(n=_.indexOf(r,t),-1===n)throw Error("Element key not in dataset");return this.el.find("."+e.cssPrefix+e.List.classNames[1]).eq(n)},this.get=function(e){var t,n=[];if(c.data instanceof Backbone.Collection){for(t=0;l.length>t;t++)if(n.push(l[t].toJSON()),e&&n.length===e)return n;return n}return e?l.slice(0,e):l},this.getFocusedIndex=function(){return r.length?r[c.focusIndex]:c.focusIndex},this.set=function(e,t){return c.data=e,this.stopListening(),c.data instanceof Backbone.Collection&&u.listenTo(c.data,c.updateOn.join(" "),function(){u.update()}),this.update(t),this},c.data instanceof Backbone.Collection&&u.listenTo(c.data,c.updateOn.join(" "),function(){u.update()});for(var h in c.itemEvents){var m=h.split(" ");this.el.on(m.shift(),"."+f+" "+m.join(" "),function(n){return function(i){var o,s,d,h=t(this),m=0;if(!h.hasClass(e.cssPrefix+e.List.classNames[2])){if(o=h.hasClass(f)?h:h.parents("."+f),s=-1,t.each(a,function(){return t(this).is(o)?(s=m,!1):(m++,void 0)}),-1===s)throw Error("Weird. I could not find the matching element. Please report this!");l instanceof Backbone.Collection?(m=r[s],d=c.data.get(r[s])):(m=r.length?r[s]:s,d=l[s]),"function"==typeof c.itemEvents[n]?c.itemEvents[n].call(this,i,m,d,u):u.trigger("item:"+c.itemEvents[n],i,m,d)}}}(h))}this.focus=function(){c.keyboard&&(e.keyListener.enable(),e.keyListener.setScope(u),e.keyListener.onScoped(u,"keydown",o))},this.blur=function(){c.keyboard&&(e.keyListener.offScoped(u,"keydown",o),e.keyListener.releaseScope(u),c.keyboardInput="",c.focusIndex=null,u.el.find("."+e.cssPrefix+e.List.classNames[3]).removeClass(e.cssPrefix+e.List.classNames[3]))},void 0!==n.data&&this.update(),e._stat("List")}).inheritPrototype("Element")}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo")),e.defineElement("ToggleButton",["togglebutton","toggled"],function(t){t=t||{},modo.Button.call(this,t),this.addClass(modo.ToggleButton.classNames[0]),this.toggled=!1,this.locked=!1,this.on("click",function(){this.locked||(this.get()?this.set(!1):this.set(!0))}),e._stat("ToggleButton")}).inheritPrototype("Button").extendPrototype({set:function(e){return e===void 0&&(e=!this.toggled),e=e?!0:!1,this.toggled=e,this.toggled?(this.addClass(modo.ToggleButton.classNames[1]),this.trigger("change",!0)):(this.removeClass(modo.ToggleButton.classNames[1]),this.trigger("change",!1)),this},get:function(){return this.toggled},lock:function(e){return e===void 0&&(e=!0),this.locked=e?!0:!1,this}}),"undefined"!=typeof exports?exports=modo.ToggleButton:"function"==typeof define&&define("ToggleButton",[],function(){return modo.ToggleButton})}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo")),e.defineElement("ToggleGroup",["togglegroup"],function(t){function n(){var e;if(r.trigger("click",o),this.toggled){if(!r._untoggle)return;e=!0,o=null}for(var t in r.elements)r.elements[t].modoId!==this.modoId||e||(o=t),r.elements[t].toggled&&r.elements[t].set(!1);e||this.set(!0),r.trigger("change",o)}function i(){t.elements={},r.el.html("");var e,n,i={};for(e in t.collection.models)n=t.collection.models[e],i[n.id||n.cid]=n.get(t.pluck);r.add(i),o&&r.set(o,{silent:!0})}t=t||{},t.layout=modo.Container.INLINE,modo.Container.call(this,t),this.removeClass(modo.Container.classNames[0]).addClass(modo.ToggleGroup.classNames[0]),this.elements={},this._untoggle=t.untoggle||!1;var o,s=modo.ToggleGroup.prototype.add,a=modo.ToggleGroup.prototype.remove,r=this;this.add=function(e,t){var i,a;t=t||{},a=t.silent;for(var r in e){if(i=e[r],modo.isElement(i)){if(i instanceof modo.ToggleButton){i.lock(),this.elements[r]=i,i.on("click",n),s.call(this,i,t),o===void 0&&this.set(r),a||this.trigger("add",i);continue}throw Error("Only Modo elements of type ToggleButton can be added to a ToggleGroup.")}if("string"!=typeof e[r])throw Error("Please pass key/value pairs with string values to this element.");this.elements[r]=new modo.ToggleButton({label:e[r]}),this.elements[r].lock(),this.elements[r].on("click",n),void 0!==o||this._untoggle||this.set(r),s.call(this,this.elements[r],t),a||this.trigger("add",this.elements[r])}},this.remove=function(e,t){return t=t||{},void 0===e&&(e=[],_.each(this.elements,function(t,n){e.push(n)})),e instanceof Array?(_.each(e,function(e){r.remove(e,t)}),void 0):("string"==typeof e?this.elements[e]!==void 0&&(a.call(this,this.elements[e],t),this.elements[e].off("click",n),delete this.elements[e],t.silent||this.trigger("remove",e)):a.call(this,e,t),void 0)},this.disable=function(){_.each(this.elements,function(t){t instanceof e.ToggleButton&&t.disable()})},this.enable=function(){_.each(this.elements,function(t){t instanceof e.ToggleButton&&t.enable()})},this.set=function(e,t){var n;if(t=t||{},n=t.silent,"number"==typeof e&&(e+=""),null===e&&this._untoggle)return o&&this.elements[o].set(!1),o=e,n||this.trigger("change",e),this;if(this.elements[e]===void 0)throw Error("Object not in this group");if(this.elements[e].get())return this;for(var i in this.elements)this.elements[i].set(i===e);return o=e,n||this.trigger("change",e),this},this.get=function(){return o},void 0!==t.elements&&this.add(t.elements),void 0!==t.selectedItem&&this.set(t.selectedItem),void 0!==t.collection&&(i(),t.collection.on(t.updateOn?t.updateOn.join(" "):"add change remove sort",function(){i()})),e._stat("ToggleGroup")}).inheritPrototype("Container").extendPrototype({getElements:function(){return this.elements},getElementByKey:function(e){return this.elements[e]}}),"undefined"!=typeof exports?exports=e.ToggleGroup:"function"==typeof define&&define("modo.ToggleGroup",function(){return e.ToggleGroup})}(),function(){"use strict";function e(e,n){return void 0!==n?t.ViewStack.classNames[e]:t.cssPrefix+t.ViewStack.classNames[e]}var t,n;n=jQuery,"undefined"!=typeof modo?t=modo:"function"==typeof require&&(t=require("modo")),t.defineElement("ViewStack",["viewstack"],function(n){n=n||{},t.Container.call(this,n);var i,o;this.addClass(e(0,!0)),i=t.ViewStack.prototype.add,o=t.ViewStack.prototype.remove,this.elements={},this.count=0,this.displaying=0,this.switchMethod=n.switchMethod,this.add=function(e,n){var o,s;if(t.isElement(e)||t.isDOM(e))throw Error("Do not pass modo.* or DOM elements here, directly");n=n||{},s=n.silent;for(o in e){this.elements[o]=e[o],this.count++,1===this.count?(e[o].show(),this.displaying=o,this.trigger("display",o),this.trigger("change",o)):e[o].hide(),i.call(this,e[o],{silent:!0});var a={};a[o]=e[o],s||this.trigger("add",a)}return this},this.remove=function(e,t){var n,i,s;if(t=t||{},s=t.silent,this.elements[e]===void 0)throw Error("Object not part of this Container");if(o.call(this,this.elements[e],{silent:!0}),n={},n[e]=this.elements[e],delete this.elements[e],this.count--,s||this.trigger("remove",n),this.displaying===e){if(this.displaying=null,!this.count)return;for(i in n.elements)return this.display(i),void 0}return this},this.getElements=function(){return this.elements},t._stat("ViewStack")}).inheritPrototype("Container").extendPrototype({set:function(e){var t,n;if(this.elements[e]===void 0)throw Error("Object not part of this Container");return t=this.getElementByKey(e),this.displaying&&(n=this.getElementByKey(this.displaying)),"function"==typeof this.switchMethod?this.switchMethod(n,t):(n&&n.hide(),t.show()),this.displaying=e,this.trigger("display",e),this.trigger("change",e),this},get:function(){return this.displaying},getElementByKey:function(e){if(void 0===this.elements[e])throw Error("Element does not exist");return this.elements[e]}}),"undefined"!=typeof exports?exports=t.ViewStack:"function"==typeof define&&define("ViewStack",[],function(){return t.ViewStack})}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo"));var n={openStack:[],modal:[],nonModal:[],mask:null,zIndex:0,maskOwnerStack:[],maskOwner:null,showMask:function(i,o){null===n.mask&&(n.mask=t("<div></div>").hide(),n.mask.addClass(e.cssPrefix+e.PopUp.classNames[1]),o.className&&n.mask.addClass(o.className+"-mask"),e.getRootElement().append(n.mask),n.mask.on("click",function(e){e.preventDefault(),e.stopPropagation(),null!==n.maskOwner&&n.maskOwner[1].closeOnBackdrop&&n.maskOwner[0].close()})),null!==n.maskOwner&&n.maskOwnerStack.push(n.maskOwner),n.mask[0].style.zIndex=i.el[0].style.zIndex-1,n.mask.fadeIn(),n.maskOwner=[i,o]},hideMask:function(){n.maskOwner=null,n.maskOwnerStack.length?(n.maskOwner=n.maskOwnerStack.pop(),n.mask[0].style.zIndex=n.maskOwner[0].el[0].style.zIndex-1):n.mask.fadeOut()},getDepth:function(){return n.zIndex+=2,9e3+n.zIndex-2}};e.once("init",function(){e.getRootElement().on("keydown",function(e){if(27===e.keyCode&&0!==n.openStack.length){var t=n.openStack[n.openStack.length-1];t._settings.keyboard&&t.close()}})}),e.defineElement("PopUp",["popup","popup-mask","popup-level-"],function(t){t=t||{},e.Container.call(this,t),this.classNames=e.PopUp.classNames,this.addClass(this.classNames[0]),this.noAdd=!0;var i=this,o=this._settings={className:t.className,modal:t.modal||!1,keyboard:t.keyboard||!0,closeOnBackdrop:t.closeOnBackdrop!==void 0?t.closeOnBackdrop:!0,attached:!1,visible:!1,animate:t.animate||!1,showEffect:t.showEffect||null,hideEffect:t.hideEffect||null};this.el.hide(),this.open=function(){return this.isOpen()?void 0:(o.attached||e.getRootElement().append(this.el),o.animate?t.showEffect?t.showEffect(this.el):this.el.fadeIn("slow"):this.el.show(),this.el[0].style.zIndex=n.getDepth(),o.visible=!0,o.modal&&n.showMask(this,o),this.trigger("open"),n.openStack.push(this),this.addClass(this.classNames[2]+n.openStack.length),this._myStackHeight=n.openStack.length,this)},this.close=function(){return this.isOpen()?(o.animate?t.hideEffect?t.hideEffect(this.el):this.el.fadeOut("slow"):this.el.hide(),o.visible=!1,o.modal&&n.hideMask(),this.trigger("close"),this.removeClass(this.classNames[2]+this._myStackHeight),n.openStack=_.without(n.openStack,this),this):void 0},this.move=function(e,t){return void 0===t&&"object"==typeof e&&(t=e.y,e=e.x),i.el.css({top:t,left:e}),i.trigger("move",e,t),this},this.isOpen=function(){return o.visible},t.x!==void 0&&this.el.css("left",t.x),t.y!==void 0&&this.el.css("top",t.y),e._stat("PopUp")}).inheritPrototype("Container"),"undefined"!=typeof exports?exports=e.PopUp:"function"==typeof define&&define("PopUp",[],function(){return e.PopUp})}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo")),e.defineElement("FormContainer",["formcontainer"],function(n){n=n||{},e.Container.call(this,n),this.addClass(e.FormContainer.classNames[0]);var i=e.FormContainer.prototype.add,o=e.FormContainer.prototype.remove,s=this,a={elements:{},autosave:n.autosave||!1,autosync:n.autosync,data:null,preparedData:null,csrf:n.csrf||null,prepare:n.prepare||function(e){return e},clean:n.clean||function(e){return e},finalPrepare:n.finalPrepare||function(e){return e},finalClean:n.finalClean||function(e){return e},changeNotifier:function(){s.dirty=!0,a.autosave&&s.save(),s.trigger("change")}};this.defaultData=n.defaultData||{},this.dirty=!1,this.add=function(){function t(e){a.changeNotifier(this,e)}for(var n,o,s,r,l,d=[],c=!1,u=0;arguments.length>u;u++)if(n=arguments[u],e.isElement(n)){if(n instanceof e.FormSlot){o=n.getElements();for(s in o){if(!e.isGetSetElement(o[s]))throw Error("Only get/set enabled elements can be added with a data-key.");o[s].parentFormSlot=n,a.elements[s]=o[s],this.listenTo(o[s],"change",t)}}else this.listenTo(n,"change",t);i.call(this,n.el),d.push(n)}else{c=!1;for(s in n){if(!e.isElement(n[s]))break;if(!e.isGetSetElement(n[s]))throw Error("Only get/set enabled elements can be added with a data-key.");
a.elements[s]=n[s],r={},r[s]=n[s],i.call(this,n[s].el),d.push(r),c=!0}c?this.listenTo(n[s],"change",function(e){a.changeNotifier(this,e)}):(i.call(this,n),l||d.push(n))}if(!l)for(s in d)this.trigger("add",d[s]);return this},this.remove=function(e,t){if(void 0===a.elements[e])throw Error("No element with that key found");if(void 0!==a.elements[e].parentFormSlot){if(!t)throw Error("Element with that key is part of a FormSlot. Call remove() with force=true to dump the FormSlot along.");o.call(this,a.elements[e].parentFormSlot),_.each(a.elements[e].parentFormSlot.getElements(),function(e,t){delete a.elements[t]})}return o.call(this,a.elements[e]),delete a.elements[e],this},this.removeAll=function(){return delete a.elements,a.elements={},this.el.html(""),this},this.set=function(e,t){var n,i,o;t=t||{silent:!1},i=t.silent,void 0===e&&(e=this.defaultData),this.stopListening(),a.data=e,a.preparedData=e instanceof Backbone.Model?e.toJSON():e;for(n in a.preparedData)"function"==typeof a.prepare[n]&&(a.preparedData[n]=a.prepare[n](a.preparedData[n]));a.preparedData=a.finalPrepare(a.preparedData);for(n in a.preparedData)a.elements[n]!==void 0&&"function"==typeof a.elements[n].set&&a.elements[n].set(a.preparedData[n],t);return i||this.trigger("change",a.preparedData),o=this,_.each(this.getElements(),function(e){o.listenTo(e,"change",function(e){a.changeNotifier(this,e)})}),this},this.reset=function(e){return this.set(void 0,e)},this.get=function(){var e,t={};for(e in a.elements)t[e]=a.elements[e].get();return t},this.getElements=function(){return a.elements},this.save=function(e){var t,n,i;e=e||{},t=e.silent,n=this.get();for(i in n)"function"==typeof a.clean[i]&&(n[i]=a.clean[i](n[i]));return n=a.finalClean(n),a.data instanceof Backbone.Model?a.data.set(n):a.data=n,this.dirty=!1,t||this.trigger("save"),a.autosync&&a.data instanceof Backbone.Model&&a.data.save(),this},this.send=function(e){e=e||{};var n={target:e.target||"",method:e.method||"POST",ajax:e.ajax!==void 0?e.ajax:!0,callback:e.callback||function(){}},i=this.get();if(a.csrf&&(i.csrfToken=a.csrf),n.ajax)return t.ajax(n.target,{data:i,type:n.method}).always(n.callback),this;var o=document.createElement("form");o.setAttribute("method",n.method),o.setAttribute("action",n.target);var s;for(var r in i)s=document.createElement("input"),s.setAttribute("type","hidden"),s.setAttribute("name",r),s.setAttribute("value",i[r]),o.appendChild(s);return document.body.appendChild(o),o.submit(),this},this.focus=function(){var e;for(e in a.elements)if("function"==typeof a.elements[e].focus)return a.elements[e].focus(),void 0;return this},this.disable=function(){var t;for(t in a.elements)if("function"==typeof a.elements[t].disable)return a.elements[t].disable(),void 0;return this.el.attr("disabled",!0).addClass(e.cssPrefix+"disabled"),this.trigger("disable"),this},this.enable=function(){var t;for(t in a.elements)if("function"==typeof a.elements[t].enable)return a.elements[t].enable(),void 0;return this.el.attr("disabled",!1).removeClass(e.cssPrefix+"disabled"),this.trigger("enable"),this},e._stat("FormContainer")}).inheritPrototype("Container"),"undefined"!=typeof exports?exports=e.FormContainer:"function"==typeof define&&define("FormContainer",[],function(){return e.FormContainer})}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo")),e.defineElement("FormSlot",["formslot","formslot-label","formslot-container"],function(n){n=n||{},e.Container.call(this,n),this.addClass(e.FormSlot.classNames[0]);var i={disabled:!1,elements:{},label:n.label||""},o=t("<div>"+i.label+"</div>");o.addClass(e.cssPrefix+e.FormSlot.classNames[1]);var s=t("<div></div>");s.addClass(e.cssPrefix+e.FormSlot.classNames[2]),this.el.append(o,s),this.getElements=function(){return i.elements},this.set=function(e,t){var n;return t=t||{},n=t.silence,i.label=e,o.html(e),n||this.trigger("change",e),this},this.get=function(){return i.label},this.add=function(){function t(){}for(var n,o,a,r,l,d=!1,c=[],u=0;arguments.length>u;u++)if(n=arguments[u],e.isElement(n)){if(n instanceof e.FormSlot){o=n.getElements();for(a in o){if(!e.isGetSetElement(o[a]))throw Error("Only get/set enabled elements can be added with a data-key.");o[a].parentFormSlot=n,i.elements[a]=o[a],this.listenTo(o[a],"change",t)}}else this.listenTo(n,"change",t);s.append(n.el),c.push(n)}else{for(a in n){if(!e.isElement(n[a]))break;if(!e.isGetSetElement(n[a]))throw Error("Only get/set enabled elements can be added with a data-key.");i.elements[a]=n[a],r={},r[a]=n[a],s.append(n[a].el),c.push(r),d=!0,i.disabled&&"function"==typeof n[a].disable&&n[a].disable()}d||(e.isDOM(n)?(s.append(n),c.push(n)):l=n.silence)}if(!l)for(n=0;c.length>n;n++)this.trigger("add",c[n]);return this},this.remove=function(e){return i.elements[e]!==void 0?(s.remove(i.elements[e].el),this):(e.el!==void 0?s.remove(e.el):s.remove(e),this)},this.disable=function(){var e;i.disabled=!0;for(e in i.elements)"function"==typeof i.elements[e].disable&&i.elements[e].disable();this.el.addClass(modo.cssPrefix+"disabled")},this.enable=function(){var e;i.disabled=!1;for(e in i.elements)"function"==typeof i.elements[e].enable&&i.elements[e].enable();this.el.removeClass(modo.cssPrefix+"disabled")},n.disabled&&this.disable(),e._stat("FormSlot")}).inheritPrototype("Container"),"undefined"!=typeof exports?exports=e.FormSlot:"function"==typeof define&&define("FormSlot",[],function(){return e.FormSlot})}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo")),e.defineElement("Image",["image"],function(n){n=n||{},n.el=t("<img>"),e.Element.call(this,n),this.addClass(e.Image.classNames[0]);var i={value:n.value||"",tooltip:n.tooltip||"",model:n.model||null,modelKey:n.modelKey||null},o=this;if(this.width=this.height=0,this.el.on("load",function(e){o.width=o.el[0].naturalWidth,o.height=o.el[0].naturalHeight,o.trigger("load",e)}),i.model instanceof Backbone.Model){if(!i.modelKey){if("function"!=typeof n.value)throw Error("Trying to bind to model, but no modelKey and no valueFunction given");n.model.on("change",function(){o.set(n.value.call(o,n.model))})}i.value=i.model.get(i.modelKey),i.model.on("change:"+i.modelKey,function(){o.set(i.model.get(i.modelKey))})}i.value&&(this.el[0].src=i.value),i.tooltip&&(this.el[0].title=i.tooltip),e._stat("Image")}).inheritPrototype("Element").extendPrototype({get:function(){return this.el.attr("src")},setBlank:function(){return this.set("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=")},set:function(e){return this.el.attr("src",e),this.trigger("change",e),this}}),"undefined"!=typeof exports?exports=e.Image:"function"==typeof define&&define("modo.Image",function(){return e.Image})}(),function(){"use strict";function e(e,n){var i=n.attachTo;t.isElement(i)&&(i=i.el);var o,s={x:i.offset().left,y:i.offset().top,w:i.outerWidth(),h:i.outerHeight()};switch(n.attachAt){case"tr":o={top:s.y-e.el.outerHeight(),left:s.x+s.w/2};break;case"tc":o={top:s.y-e.el.outerHeight(),left:s.x-(e.el.outerWidth()/2-s.w/2)};break;case"tl":o={top:s.y-e.el.outerHeight(),left:s.x-(e.el.outerWidth()-s.w/2)};break;case"lt":o={top:s.y,left:s.x-e.el.outerWidth()};break;case"lc":o={top:s.y-(e.el.outerHeight()/2-s.h/2),left:s.x-e.el.outerWidth()};break;case"lb":o={top:s.y+s.h-e.el.outerHeight(),left:s.x-e.el.outerWidth()};break;case"rt":o={top:s.y,left:s.x+s.w};break;case"rc":o={top:s.y-(e.el.outerHeight()/2-s.h/2),left:s.x+s.w};break;case"rb":o={top:s.y+s.h-e.el.outerHeight(),left:s.x+s.w};break;case"br":o={top:s.y+s.h,left:s.x+s.w/2};break;case"bc":o={top:s.y+s.h,left:s.x-(e.el.outerWidth()/2-s.w/2)};break;case"bl":o={top:s.y+s.h,left:s.x-(e.el.outerWidth()-s.w/2)}}e.el.css(o)}var t,n;n=jQuery,"undefined"!=typeof modo?t=modo:"function"==typeof require&&(t=require("modo")),t.defineElement("PopUpBubble",["popupbubble","popupbubble-attach-"],function(i){i=i||{},i.modal=!1,t.PopUp.call(this,i),this.addClass(t.PopUpBubble.classNames[0]);var o={attachTo:null,attachAt:null,visible:!1,autoHide:i.autoHide||!0},s=this,a=function(){s.close()},r=["tl","tc","tr","lt","lc","lb","rt","rc","rb","bl","bc","br"];this.attach=function(n,i){if(-1===_.indexOf(r,i))throw Error("Illegal position");o.attachTo=n,o.attachAt=i,s.isOpen()&&e(s,o);for(var a=0;r.length>a;a++)this.el.removeClass(t.cssPrefix+t.PopUpBubble.classNames+r[a]);return this.el.addClass(t.cssPrefix+t.PopUpBubble.classNames[1]+i),this},i.attachTo!==void 0&&this.attach(i.attachTo,i.attachAt||t.PopUpBubble.BOTTOM),this.on("open",function(){this.el.parent()!=t.getRootElement()&&t.getRootElement().append(this.el),e(s,o),setTimeout(function(){o.autoHide&&(s.el.on("click",function(e){e.stopPropagation()}),n(window).on("click",a))},1)}),this.on("close",function(){n(window).off("click",a)}),t._stat("PopUpBubble")}).inheritPrototype("PopUp"),t.PopUpBubble.TOP="tc",t.PopUpBubble.TOPLEFT="tl",t.PopUpBubble.TOPRIGHT="tr",t.PopUpBubble.LEFT="lc",t.PopUpBubble.LEFTTOP="lt",t.PopUpBubble.LEFTBOTTOM="lb",t.PopUpBubble.RIGHT="rc",t.PopUpBubble.RIGHTTOP="rt",t.PopUpBubble.RIGHTBOTTOM="rb",t.PopUpBubble.BOTTOM="bc",t.PopUpBubble.BOTTOMLEFT="bl",t.PopUpBubble.BOTTOMRIGHT="br","undefined"!=typeof exports?exports=t.PopUpBubble:"function"==typeof define&&define("PopUpBubble",[],function(){return t.PopUpBubble})}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo")),e.defineElement("Calendar",["calendar","calendar-selector","calendar-field","calendar-prev","calendar-next","calendar-label","calendar-field-row","calendar-field-day-names","calendar-day","calendar-day-disabled","calendar-day-today","calendar-day-selected"],function(n){function i(){var t,n=0;c.text(u.dateToString(a.monthLabelFormat,a.seekDate)),null!==a.minDate&&a.seekDate.getMonth()===a.minDate.getMonth()&&a.seekDate.getYear()===a.minDate.getYear()?l.disable():l.enable(),null!==a.maxDate&&a.seekDate.getMonth()===a.maxDate.getMonth()&&a.seekDate.getYear()===a.maxDate.getYear()?d.disable():d.enable();var i,s=new Date(a.seekDate),f=s.getMonth();i=0===s.getDay()?5184e5:864e5*(s.getDay()-1),s.setTime(s.getTime()-i),t='<div class="'+o[6]+" "+o[7]+'"><div class="'+o[8]+'">',t+=e.Calendar.DAY_NAMES_SHORT.join('</div><div class="'+o[8]+'">')+"</div></div>";var h,m,p,g=!1,v=new Date;for(v.setHours(0),v.setMinutes(0),v.setSeconds(0),v.setMilliseconds(0);42>n;){g||(t+='<div class="'+o[6]+'">',g=!0),h={},s.getMonth()!==f&&(h[o[9]]=!0),s.getTime()===v.getTime()&&(h[o[10]]=!0),null!==a.minDate&&a.minDate.getTime()>s.getTime()&&(h[o[9]]=!0),null!==a.maxDate&&a.maxDate.getTime()<s.getTime()&&(h[o[9]]=!0),null!==a.date&&s.getDate()===a.date.getDate()&&s.getMonth()===a.date.getMonth()&&s.getFullYear()===a.date.getFullYear()&&(h[o[11]]=!0),m=[];for(p in h)h[p]&&m.push(p);h=m.join(" "),t+='<div class="'+o[8]+" "+h+'">'+s.getDate()+"</div>",s.setTime(s.getTime()+864e5),n++,0===n%7&&(t+="</div>",g=!1)}t+="</div>",s.setMonth(f),s.setDate(1),s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),r.html(t)}n=n||{},e.Element.call(this,n);for(var o=[],s=0;e.Calendar.classNames.length>s;s++)o.push(e.cssPrefix+e.Calendar.classNames[s]);var a={minDate:n.minDate instanceof Date?n.minDate:null,maxDate:n.maxDate instanceof Date?n.maxDate:null,monthLabelFormat:n.monthLabelFormat||"F Y",date:n.date!==void 0?new Date(n.date):null,selectable:n.selectable||!0,seekDate:null};a.seekDate=a.date,a.seekDate instanceof Date||(a.seekDate=new Date),a.seekDate.setDate(1),a.seekDate.setHours(0),a.seekDate.setMinutes(0),a.seekDate.setSeconds(0),a.seekDate.setMilliseconds(0),this.addClass(e.Calendar.classNames[0]),this.el.html('<div class="'+o[1]+'"></div>');var r=t('<div class="'+o[2]+'"></div>');this.el.append(r);var l=new e.Button({label:e.Calendar.PREVIOUS,className:o[3]}),d=new e.Button({label:e.Calendar.NEXT,className:o[4]});if(null!==a.minDate&&null!==a.date&&a.date.getTime()<a.minDate.getTime()){if(n.date)throw Error("Given default date previous to given minimal date.");a.date=a.seekDate=a.minDate,a.seekDate.setDate(1)}if(null!==a.maxDate&&null!==a.date&&a.date.getTime()>a.maxDate.getTime()){if(n.date)throw Error("Given default date after given maximal date.");a.date=a.seekDate=a.maxDate,a.seekDate.setDate(1)}l.on("click",function(e){e.preventDefault(),e.stopPropagation(),a.seekDate.setMonth(a.seekDate.getMonth()-1),i(),u.trigger("seek")}),d.on("click",function(e){e.preventDefault(),e.stopPropagation(),a.seekDate.setMonth(a.seekDate.getMonth()+1),i(),u.trigger("seek")});var c=t('<div class="'+o[5]+'"></div>');t("."+o[1],this.el).append(l.el,c,d.el);var u=this;a.selectable&&r.on("click","."+o[8],function(e){e.preventDefault(),e.stopPropagation();var n=t(this);if(!n.hasClass(o[9])){t("."+o[8],u.el).removeClass(o[11]),n.addClass(o[11]);var i=new Date(a.seekDate);i.setDate(parseInt(n.text(),10)),a.date=i,u.trigger("change",i)}}),i(),this.get=function(){return a.date},this.set=function(e){return a.date=new Date(e),i(),this.trigger("seek"),this.trigger("change",a.date),this},e._stat("Calendar")}).inheritPrototype("Element").extendPrototype({dateToString:function(t,n){if(n===void 0){if(!this)return null;n=this.get()}return e.dateFormatter.dateToString(t,n)}}),e.Calendar.PREVIOUS="◀",e.Calendar.NEXT="▶"}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo")),e.defineElement("DropDown",["dropdown","dropdown-button","dropdown-list","dropdown-dropped","dropdown-selected"],function(n){n=n||{},e.Element.call(this,n),this.addClass(e.DropDown.classNames[0]);var i=t("<button></button>");i.addClass(e.cssPrefix+e.DropDown.classNames[1]),n.tooltip&&i.attr("title",n.tooltip),this.el.append(i);var o={data:n.data,buttonRender:n.buttonRender||function(e){if("string"==typeof e||"number"==typeof e)return e;for(var t in e)if("_m"!==t)break;return""+e[t]},selectedItem:void 0!==n.selectedItem?n.selectedItem:null,selectedData:null,placeholder:n.placeholder||"",keyboard:n.keyboard||!0};if(n.keyboard){if(!modo.keyListener)throw Error("keyListener missing");modo.keyListener.enable()}"function"==typeof n.data&&(o.data=n.data()),n.className=e.cssPrefix+e.DropDown.classNames[2];var s=this;n.itemEvents={click:function(e,t,n){return n instanceof Backbone.Model?(s.set(n.id),void 0):(s.set(t),void 0)}},n.keyboard=o.keyboard;var a=new e.List(n);i.on("click",function(n){function i(n,o){if(n.preventDefault(),n.stopPropagation(),"enter"===o){var r=a.getFocusedIndex();if(!r)return;s.set(r)}s.el.removeClass(e.cssPrefix+e.DropDown.classNames[3]),modo.keyListener.offScoped(a,"escape",i),a.el.scrollTop(0),t("html").off("click",i),a.blur()}s.disabled||(s.el.addClass(e.cssPrefix+e.DropDown.classNames[3]),o.keyboard&&a.focus(),n.stopPropagation(),modo.keyListener.onceScoped(a,"escape",i),modo.keyListener.onScoped(a,"enter",i),t("html").one("click",i))}),this.el.append(a.el),this.selectedItem=o.selectedItem,this.selectedData=null,this.length=a.length,this.update=function(){a.update()},this.set=function(e,t){var n,s;if(t=t||{},n=t.silent,s=this.selectedItem,this.selectedItem=e,null===e)return this.selectedData=null,i.html(o.buttonRender(o.placeholder)),this.trigger("change",null,null),void 0;if(o.data instanceof Backbone.Collection){if(!o.data.get(e))throw this.selectedItem=s,Error("Object not found");this.selectedData=o.data.get(e),i.html(o.buttonRender(_.extend(this.selectedData.toJSON(),{_m:this.selectedData}),this.selectedData))}else{if(o.data[e]===void 0)throw this.selectedItem=s,Error('Element "'+e+'" not found in dataset');this.selectedData=o.data[e],this.selectedData instanceof Backbone.Model?i.html(o.buttonRender(_.extend(this.selectedData.toJSON(),{_m:this.selectedData}))):i.html(o.buttonRender(this.selectedData))}return n||this.trigger("change",this.selectedItem,this.selectedData),this},this.setDataset=function(e,t){return o.data=e,a.set(e,t),this.set(this.selectedItem,{silent:!0}),this.length=a.length,this},this.get=function(){return this.selectedItem},this.getData=function(){return this.selectedData},this.set(o.selectedItem,{silent:!0}),e._stat("DropDown")}).inheritPrototype("Element"),e.DropDown.prototype.disable=e.Button.prototype.disable,e.DropDown.prototype.enable=e.Button.prototype.enable}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo")),e.defineElement("Grid",["grid","grid-header","grid-row","grid-cell","grid-column-"],function(n){function i(){s.el.off(".itemEvent","**"),_.each(o.columns,function(n){var i,r;if(n.render===void 0&&(n.render=function(e){return""+e},n.title=n.title||""),n.itemEvents)for(var l in n.itemEvents)i=l.split(" "),r=e.cssPrefix+e.Grid.classNames[4]+n.key,s.el.on(i.shift()+".itemEvent","."+r+" "+i.join(" "),function(n,i){return function(r){var l,d,c,u,f,h=t(this),m=0;if(l=h.parents("."+e.cssPrefix+e.Grid.classNames[2]),f=s.el.find("."+e.cssPrefix+e.Grid.classNames[2]).not("."+e.cssPrefix+e.Grid.classNames[1]),d=-1,_.every(f,function(e){return t(e).is(l)?(d=m,!1):(m++,!0)}),-1===d)throw Error("Weird. I could not find the matching row. Please report this!");if(o.data instanceof Backbone.Collection)m=a[d],c=o.data.get(m);else{if(!(o.data instanceof Array))throw Error("Not implemented.");m=d,c=o.data[d]}u=c instanceof Backbone.Model?c.get(n.key):c[n.key],"function"==typeof n.itemEvents[i]?n.itemEvents[i].call(s,r,m,u,c,n.key):s.trigger("item:"+n.itemEvents[i],r,m,u,c,n.key)}}(n,l))})}n=n||{},e.Element.call(this,n),this.addClass(e.Grid.classNames[0]);var o,s,a;o={data:null,collector:n.collector||function(e){return e.filter(function(){return!0})},updateOn:n.updateOn||["add","change","remove","sort"],columns:n.columns,prepare:n.prepare||function(e){return e instanceof Backbone.Model?e.toJSON():e},visibleColumns:n.visibleColumns||null,rowTag:n.rowTag||"div",cellTag:n.cellTag||"div"},s=this,i(),this.setColumns=function(e){return o.columns=e,i(),this.update(),this},this.set=function(e,t){var n;if(n=this,!(e instanceof Backbone.Collection||e instanceof Array))throw Error("Only data type Array or Backbone.Collection allowed. Yours is: "+typeof o.data);o.data=e,this.stopListening(),e instanceof Backbone.Collection&&this.listenTo(e,o.updateOn.join(" "),function(){n.update(t)}),this.update()},this.update=function(t){function n(e,t){return"<"+o.rowTag+' class="'+k+(t?" "+b:"")+'">'+e+"</"+o.rowTag+">"}function i(e,t){return g++,"<"+o.cellTag+' class="'+x+" "+E+t+'">'+e+"</"+o.cellTag+">"}var s,r,l,d,c,u,f,h="",m="",p=[],g=0,v=this,y=[],b=e.cssPrefix+e.Grid.classNames[1],k=e.cssPrefix+e.Grid.classNames[2],x=e.cssPrefix+e.Grid.classNames[3],E=e.cssPrefix+e.Grid.classNames[4];if(t=t||{},l=t.silent,a=[],null===o.visibleColumns)p=o.columns;else for(d=0;o.columns.length>d;d++)-1!==_.indexOf(o.visibleColumns,o.columns[d].key)&&p.push(o.columns[d]);for(_.each(p,function(e){m+=i(e.title,e.key)}),h=n(m,!0),r=o.collector(o.data),_.each(r,function(t,r){var l;for(a.push(t.id||t.cid||r),m="",s=o.prepare(t),d=0;p.length>d;d++){if(c=p[d],null!==c.key&&void 0!==c.key){if(s[c.key]===void 0)throw Error('Undefined field "'+c.key+'" in row data.');u=c.render(s[c.key],s)}else u=c.render(void 0,s);if(e.isElement(u)){if(c.isModo=!0,y.push([g,u]),c.events!==void 0)for(l in c.events)c.events.hasOwnProperty(l)&&v.listenTo(u,l,function(e,t){c.events[l].call(this,e,t,s)});u=""}m+=i(u,c.key)}h+=n(m)}),this.el.html(h),f=this.el.find("."+e.cssPrefix+e.Grid.classNames[3]),d=0;y.length>d;d++)f.eq(y[d][0]).append(y[d][1].el);return l||this.trigger("update"),this},this.set(n.data,{silent:!0}),e._stat("Grid")}).inheritPrototype("Element"),"undefined"!=typeof exports?exports=e.Grid:"function"==typeof define&&define("modo.Grid",function(){return e.Grid})}(),function(){"use strict";function e(e,n){return void 0!==n?t.Checkbox.classNames[e]:t.cssPrefix+t.Checkbox.classNames[e]}var t,n;n=jQuery,"undefined"!=typeof modo?t=modo:"function"==typeof require&&(t=require("modo")),t.defineElement("Checkbox",["checkbox","checkbox-label","checked"],function(i){i=i||{},t.Element.call(this,i),this.addClass(e(0,!0)),i.custom?this.$checkbox=n('<span class="'+e(0)+'"></span>'):(this.$checkbox=n('<input type="checkbox">'),this.$checkbox[0].checked=i.value,this.$checkbox.on("click",function(e){e.preventDefault(),e.stopPropagation(),o.set(!o.value),setTimeout(function(){o.$checkbox[0].checked=o.value},0)})),this.el.append(this.$checkbox,n('<span class="'+e(1)+'">'+(i.label||"")+"</span>")),this.value=!1;var o=this;if(i.tooltip&&this.el.attr("title",i.tooltip),this.el.on("click",function(e){"A"!=e.target.nodeName&&(e.preventDefault(),e.stopPropagation(),o.set(!o.value))}),i.model){if(!i.modelKey)throw Error("Trying to bind to model, but no model key given");i.value=i.model.get(i.modelKey),i.model.on("change:"+i.modelKey,function(){o.set(i.model.get(i.modelKey))})}this.set=function(t,n){var s;return n=n||{},s=n.silent,this.value=t?!0:!1,i.custom||(o.$checkbox[0].checked=this.value),this.el.toggleClass(e(2),this.value),i.model&&i.modelKey&&i.model.set(i.modelKey,this.value),s||this.trigger("change",this.value),this},void 0!==i.value&&this.set(i.value,{silent:!0}),i.disabled===!0&&this.disable(),t._stat("Checkbox")}).inheritPrototype("Element").extendPrototype({enable:function(e){var t;return e=e||{},t=e.silent,this.removeClass(modo.Element.classNames[2]),this.$checkbox.prop("disabled",!1),t||this.trigger("enabled"),this},disable:function(e){var t;return e=e||{},t=e.silent,this.addClass(modo.Element.classNames[2]),this.$checkbox.prop("disabled",!0),t||this.trigger("disabled"),this},get:function(){return this.value}}),"undefined"!=typeof exports?exports=modo.Checkbox:"function"==typeof define&&define("Checkbox",[],function(){return modo.Checkbox})}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo")),e.defineElement("Toolbar",["toolbar","toolbar-container","toolbar-container-empty","toolbar-item","toolbar-item-group-","toolbar-item-toggled"],function(n){function i(e,t){var n;t||(t=r.elements);for(var o in t){if(t[o]instanceof Array&&(n=i(e,t[o])))return n;if(t[o].key===e)return t[o]}return null}function o(e,t){var n;n=[],t||(t=r.elements);for(var i in t)t[i]instanceof Array&&(n=n.concat(o(e,t[i]))),t[i].group===e&&n.push(t[i]);return n}function s(e){var t,n;for(t=0,n=0;r.elements.length>n;n++)if(r.elements[n]instanceof Array){if(t===e)return r.elements[n];t++}return[]}function a(t,n){var i,o,s,r,c="";for(n?(c+='<div class="'+e.cssPrefix+e.Toolbar.classNames[1],t.length||(c+=" "+e.cssPrefix+e.Toolbar.classNames[2]),c+='">'):d=[],i=0;t.length>i;i++)if(o=t[i],o instanceof Array){if(n)throw Error("You cannot stack containers in a toolbar");c+=a(o,!0)}else{if(!o.key)throw Error("No element key given");if(-1!==_.indexOf(d,o.key))throw Error("Duplicate key: "+o.key);if(d.push(o.key),r=[],o.data)for(s in o.data)o.data.hasOwnProperty(s)&&r.push(" data-"+s+'="'+o.data[s]+'"');c+='<button class="'+e.cssPrefix+e.Toolbar.classNames[3]+" "+e.cssPrefix+e.Toolbar.classNames[3]+"-"+o.key+(o.group?" "+e.cssPrefix+e.Toolbar.classNames[4]+o.group:"")+(o.disabled?" "+e.cssPrefix+e.Element.classNames[2]:"")+(o.className?" "+o.className:"")+(o.toggle?" "+e.cssPrefix+e.Toolbar.classNames[5]:"")+'" data-key="'+o.key+'"'+r.join("")+' title="'+(o.tooltip||"")+'">'+(o.label||"")+"</button>"}return n?c+="</div>":(l.el.html(c),void 0)}n=n||{},e.Element.call(this,n),this.addClass(e.Toolbar.classNames[0]);var r={elements:n.elements||[]},l=this,d=[];this.getElementByKey=function(n){if(-1===_.indexOf(d,n))throw Error("Unknown key");return t("."+e.cssPrefix+e.Toolbar.classNames[3]+"-"+n,this.el)},this.add=function(e){return r.elements.push(e),a(r.elements),this},this.addToContainer=function(e,t){var n;return n=0,_.each(r.elements,function(i){return i instanceof Array&&(n++,n-1===e)?(i.push(t),!1):void 0}),a(r.elements),this},this.remove=function(e,t){var n,i,o,s;for(o=this,n=0;r.elements.length>n;n++){if(i=r.elements[n],i instanceof Array&&o.remove(e,!0)){s=!0;break}if(i.key===e){r.elements.splice(n,1),s=!0;break}}if(!t&&!s)throw Error("Element not found");return t?s:this},this.removeContainer=function(e){var t,n,i;for(i=0,t=0;r.elements.length>t;t++)if(n=r.elements[t],n instanceof Array){if(e===i)return r.elements.splice(t,1),this;i++}throw Error("Element not found")},this.enableButton=function(e){return i(e).disabled=!1,a(r.elements),this},this.disableButton=function(e){return i(e).disabled=!0,a(r.elements),this},this.enableGroup=function(e,t){var n,i;for(n=o(e),i=0;n.length>i;i++)n[i].disabled=!!t;return a(r.elements),this},this.disableGroup=function(e){return this.enableGroup(e,!1)},this.enableContainer=function(e,t){var n,i;for(n=s(e),i=0;n.length>i;i++)n[i].disabled=!!t;return a(r.elements),this},this.disableContainer=function(e){return this.enableContainer(e,!1)},this.toggleButton=function(e){var t,n,s;if(t=i(e),!t.group)throw Error("Can only toggle grouped buttons");n=o(t.group);for(e in n)if(n[e].toggle&&n[e].key!==t.key){s=n[e].key,this.trigger("untoggle:"+n[e].key),n[e].toggle=!1;break}return t.toggle=!0,this.trigger("toggle:"+t.key),this.trigger("grouptoggle:"+t.group,t.key,s),a(r.elements),this},this.el.on("click","."+e.cssPrefix+e.Toolbar.classNames[3],function(n){var o,s=t(this);if(o=i(s.attr("data-key")),!o)throw Error("No element found for this key");return s.hasClass(e.cssPrefix+e.Element.classNames[3])?(n.preventDefault(),n.stopPropagation(),void 0):(o.group&&!o.toggle&&l.toggleButton(o.key),l.trigger("click:"+s.attr("data-key")),l.trigger("click",n,s.attr("data-key")),void 0)}),a(r.elements),e._stat("Toolbar")}).inheritPrototype("Element")}(),function(){"use strict";function e(e,t){return t?n.Menu.classNames[e]:n.cssPrefix+n.Menu.classNames[e]}function t(t,i){var o,s,a,r="",l=[],d=[];for(o in i.elements)s=i.elements[o],s.label?(l.push(s.ref),d.push(s.callback),s.hotkey&&(a=RegExp("("+s.hotkey.toLowerCase()+"|"+s.hotkey.toUpperCase()+")"),s.label=s.label.replace(a,'<span class="'+e(9)+'">$1</span>')),r+='<div class="'+e(5)+(s.disabled?" "+n.cssPrefix+n.Element.classNames[2]:"")+(s.children&&s.children.length?" "+e(2):"")+'">'+'<div class="'+e(7)+(s.icon?" "+e(4,!0)+s.icon:"")+'"></div>'+'<div class="'+e(6)+'">'+s.label+(s.info?'<div class="'+e(8)+'">'+s.info+"</div>":"")+"</div>"+"</div>"):r+='<div class="'+e(11)+'"></div>';i.keys=l,i.callbacks=d,t.el.html(r)}var n,i;i=jQuery,"undefined"!=typeof modo?n=modo:"function"==typeof require&&(n=require("modo")),n.defineElement("Menu",["menu","menu-dropdown","menu-has-children","menu-baseline","icon-","menu-item","menu-item-label","menu-item-field","menu-item-info","hotkey","selected","divider","first-sublevel","child"],function(o){o=o||{};var s,a;n.Element.call(this,o),this.addClass(n.Menu.classNames[0]);var r={elements:o.elements,autoHotkey:o.autoHotkey||!1,baseLevel:o.baseLevel||!1,keys:[],callbacks:[],selectedIndex:null,all:null,oldFocus:null,children:[],subMenuTimeout:null,hideTimeout:null,willOpen:null,openSubMenu:null},l=this,d=function(){l.hide()};r.baseLevel?this.addClass(n.Menu.classNames[3]):this.addClass(n.Menu.classNames[1]),t(this,r);for(s in r.elements)r.elements[s].children?(a=new n.Menu({elements:r.elements[s].children}),r.baseLevel&&a.addClass(e(12,!0)),r.children.push(a)):r.children.push(null);r.all=this.el.find("."+e(5)),this.el.on("mousemove","."+e(5),function(){var t=r.all.index(this),n=this;return this.className.match("disabled")?(r.selectedIndex=null,r.all.removeClass(e(10)),void 0):(r.selectedIndex!==t&&(r.selectedIndex=t,null!==r.openSubMenu&&r.openSubMenu!==t&&(r.hideTimeout=setTimeout(function(){r.children[r.openSubMenu]&&(r.children[r.openSubMenu].hide(),r.openSubMenu=null)},500)),r.children[t]?(clearTimeout(r.subMenuTimeout),r.openSubMenu===t&&clearTimeout(r.hideTimeout),r.willOpen!==t&&(r.subMenuTimeout=setTimeout(function(){r.openSubMenu=t,r.children[t].showAtElement(n,r.baseLevel?modo.Menu.BOTTOM:modo.Menu.RIGHT).one("select",d).focus().el.addClass(e(13,!0))},500),r.willOpen=t)):r.willOpen&&clearTimeout(r.subMenuTimeout),r.all.removeClass(e(10)),i(this).addClass(e(10))),void 0)}),this.el.on("mouseout",function(){r.selectedIndex=null,r.all.removeClass(e(10))}),this.el.on("click","."+e(5),function(t){var n;if(t.stopPropagation(),t.preventDefault(),n=r.selectedIndex,null!==n){if(r.children[n])return r.children[n].showAtElement(this,r.baseLevel?modo.Menu.BOTTOM:modo.Menu.RIGHT).one("select",d).focus().el.addClass(e(13,!0)),void 0;l.trigger("select",r.keys[n]);var i=r.callbacks[n];"function"==typeof i&&i.call(this),r.baseLevel||l.hide()}}),r.baseLevel||this.hide();var c=function(){};this.on("show",function(){r.oldFocus=document.activeElement,r.oldFocus.blur(),setTimeout(function(){i(window).one("click",d)},1),n.keyListener.on("keyPress",c)}),this.on("hide",function(){r.oldFocus&&r.oldFocus.focus(),r.oldFocus=null,r.all.removeClass(e(9)),r.selectedIndex=null,n.keyListener.off("keyPress",c),i(window).off("click",d),r.openSubMenu&&r.children[r.openSubMenu].hide()}),n.keyListener.enable(),r.baseLevel||n.getRootElement().append(this.el),n._stat("Menu")}).inheritPrototype("Element").extendPrototype({showAtElement:function(e,t){var o,s,a;if(void 0===t&&(t=0),n.isElement(e)?o=e.el:n.isDOM(e)&&(o=i(e)),!o)throw Error("Illegal element");var r=o.offset();switch(s=a=0,t){case 0:a=-this.el.outerHeight();break;case 1:a=o.outerHeight();break;case 2:s=-o.outerWidth();break;case 3:s=this.el.outerWidth()}return this.el.css({top:r.top+a,left:r.left+s}),this.show(),this},showAtCursor:function(){return this.el.css({top:n.mousePosition.y,left:n.mousePosition.x}),this.show(),this},focus:function(){return this}}),n.Menu.TOP=0,n.Menu.BOTTOM=1,n.Menu.LEFT=2,n.Menu.RIGHT=3,n.once("init",function(){n.getRootElement().on("mousemove",function(e){var t=i(this),o=i(window),s=t.offset(),a={x:e.pageX-s.left+o.scrollLeft(),y:e.pageY-s.top+o.scrollTop()};n.mousePosition=a})})}(),function(){"use strict";var e,t;t=jQuery,"undefined"!=typeof modo?e=modo:"function"==typeof require&&(e=require("modo"));var n,i,o,s;n=!1,i=!1,o=[],s={},e.keyListener={keymap:{en:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"win",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"+",188:",",189:"-",190:".",191:"/",192:"`",219:"(",220:"^",221:"´",222:"`",226:"\\"},de:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"win",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:"ü",187:"+",188:",",189:"-",190:".",191:"#",192:"ö",219:"ß",220:"^",221:"´",222:"ä",226:"<"}},lastKey:null,isScoped:!1,enable:function(r){return n?(n=!1,void 0):(e._stat("keyListener"),r=r||{},i=!1,t(window).on("keydown",function(t){if(!i){var n,r,l,d,c=t.altKey,u=t.shiftKey,f=t.ctrlKey,h=t.metaKey,m=t.keyCode;
o.length&&(d=o[o.length-1]),r=a[m]||"",l=f?"ctrl":"",u&&(l&&(l+="+"),l+="shift"),c&&(l&&(l+="+"),l+="alt"),l&&(l+="+"),l+=r,(u||f||c||h)&&"shift"!==r&&"ctrl"!==r&&"alt"!==r&&(d&&(l+="~"+d),e.keyListener.trigger("stroke",t,l)),r&&(s[r]=!0,n=r,d&&(r+="~"+d,s[r]=!0),e.keyListener.lastKey=r,e.keyListener.trigger(r,t,n),e.keyListener.trigger("keydown"+(d?"~"+d:""),t,n))}}).on("keyup",function(t){var n,i,r,l;n=t.keyCode,i=a[n]||"",o.length&&(l=o[o.length-1]),delete s[i],r=i,l&&(i+="~"+l,delete s[i]),e.keyListener.trigger("keyup"+(l?"~"+l:""),t,r)}).focus(),n=!0,void 0)},disable:function(){i=!0},setScope:function(e){o.push(e.modoId||e),this.isScoped=!0},isPressed:function(e){return"number"==typeof e&&(e=a[e]),s[e]===!0},releaseScope:function(e){var t;t=_.indexOf(o,e.modoId||e),-1!==t&&o.splice(t,1),o.length||(this.isScoped=!1)},onScoped:function(e,t,n,i,o){var s,a;for(s=e.modoId||e,t=t.split(" "),a=0;t.length>a;a++)t[a]=t[a]+"~"+s;t=t.join(" "),o&&this.once(t,n,i),this.on(t,n,i)},onceScoped:function(e,t,n,i){this.onScoped(e,t,n,i,!0)},offScoped:function(e,t,n,i){var o,s;for(o=e.modoId||e,t=t.split(" "),s=0;t.length>s;s++)t[s]=t[s]+"~"+o;t=t.join(" "),this.off(t,n,i)}};var a;a=e.keyListener.keymap[navigator.language]!==void 0?e.keyListener.keymap[navigator.language]:e.keyListener.keymap.en,_.extend(e.keyListener,Backbone.Events),"undefined"!=typeof exports?exports=e.keyListener:"function"==typeof define&&define("modo.keyListener",function(){return e.keyListener})}(),function(){"use strict";function e(){n||(n=!0,t._stat("dateFormatter"))}var t,n;"undefined"!=typeof modo?t=modo:"function"==typeof require&&(t=require("modo"));var i;t.dateFormatter=i={MONTH_NAMES:["January","February","March","April","May","June","July","August","September","October","November","December"],MONTH_NAMES_SHORT:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAY_NAMES:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],DAY_NAMES_SHORT:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],SUFFIX:["st","nd","rd","th"],TODAY:"today",YESTERDAY:"yesterday",LAST:"last %v",FUZZY_SECONDS:"about a minute ago",NEVER:"never",REL_UNITS:["seconds","minutes","hours","days","weeks","months","years"],REL_PAST:"%v %u ago",REL_FUTURE:"in %v %u",REL_CURRENT:"right now",DEFAULT_FORMAT:"F jS, Y",LOCAL_TIMEZONE:-((new Date).getTimezoneOffset()/60),REMOTE_TIMEZONE:-((new Date).getTimezoneOffset()/60),normalizeTimezones:!0,convertTimezone:function(t,n,i){var o;return e(),n===i?t instanceof Date?t:new Date(1e3*t):(t instanceof Date?(o=Math.floor(t.getTime()),void 0===i&&(i=-(t.getTimezoneOffset()/60))):o=1e3*t,o-=36e5*i,o+=36e5*n,new Date(o))},dateToFancyString:function(n,o,s){if(e(),s=s||{},s.normalizeTimezones=s.normalizeTimezones||i.normalizeTimezones,s.localTimezone=0===s.localTimezone?s.localTimezone:s.localTimezone||i.LOCAL_TIMEZONE,s.remoteTimezone=null===s.remoteTimezone?void 0:0===s.remoteTimezone?s.remoteTimezone:s.remoteTimezone||i.REMOTE_TIMEZONE,0===n)return this.NEVER;s.normalizeTimezones&&(n=i.convertTimezone(n,s.localTimezone,s.remoteTimezone)),n instanceof Date||(n=new Date(1e3*n)),o||(o=t.dateFormatter.DEFAULT_FORMAT);var a,r;return r=new Date,a=Math.abs(n-r)/1e3,r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0),a>604800?this.dateToString(o,n):120>a?this.FUZZY_SECONDS:3600>a?this.dateToRelativeString(n):n>r?this.TODAY+", "+this.dateToString("H:i",n):(r.setTime(r.getTime()-864e5),n>r?this.YESTERDAY+", "+this.dateToString("H:i",n):this.LAST.replace(/%v/,this.dateToString("l",n)))},dateToRelativeString:function(t,n,o){e();var s,a,r,l;if(o=o||{},o.normalizeTimezones=o.normalizeTimezones||i.normalizeTimezones,o.localTimezone=0===o.localTimezone?o.localTimezone:o.localTimezone||i.LOCAL_TIMEZONE,o.remoteTimezone=null===o.remoteTimezone?void 0:0===o.remoteTimezone?o.remoteTimezone:o.remoteTimezone||i.REMOTE_TIMEZONE,!t)throw Error("No date given");return o.normalizeTimezones&&(t=i.convertTimezone(t,o.localTimezone,o.remoteTimezone)),t instanceof Date||(t=new Date(1e3*t)),n?n instanceof Date||(n=new Date(1e3*n)):n=new Date,o.normalizeTimezones&&(n=i.convertTimezone(n,o.localTimezone,o.remoteTimezone)),a=(n-t)/1e3,0>a&&(s=!0,a=Math.abs(a)),10>=a?this.REL_CURRENT:(a>29030400&&(r=6,l=Math.round(a/29030400)),29030400>a&&(r=5,l=Math.round(a/2419200)),2419200>a&&(r=4,l=Math.round(a/604800)),604800>a&&(r=3,l=Math.round(a/86400)),86400>a&&(r=2,l=Math.round(a/3600)),3600>a&&(r=1,l=Math.round(a/60)),60>a&&(r=0,l=Math.round(a)),s?this.REL_FUTURE.replace(/%v/,l).replace(/%u/,this.REL_UNITS[r]):this.REL_PAST.replace(/%v/,l).replace(/%u/,this.REL_UNITS[r]))},dateToString:function(t,n,o){e(),n instanceof Date||(n=new Date(1e3*n)),o=o||{},o.normalizeTimezones=o.normalizeTimezones||i.normalizeTimezones,o.localTimezone=0===o.localTimezone?o.localTimezone:o.localTimezone||i.LOCAL_TIMEZONE,o.remoteTimezone=null===o.remoteTimezone?void 0:0===o.remoteTimezone?o.remoteTimezone:o.remoteTimezone||i.REMOTE_TIMEZONE,o.normalizeTimezones&&(n=i.convertTimezone(n,o.localTimezone,o.remoteTimezone));for(var s,a="",r={d:10>n.getDate()?"0"+n.getDate():n.getDate(),D:this.DAY_NAMES_SHORT[0===n.getDay()?6:n.getDay()-1],j:n.getDate(),l:this.DAY_NAMES[0===n.getDay()?6:n.getDay()-1],N:0===n.getDay()?7:n.getDay(),S:4>n.getDate()?this.SUFFIX[n.getDate()-1]:this.SUFFIX[3],w:n.getDate(),z:function(e){var t=0,n=new Date;for(n.setDate(1),n.setMonth(0),n.setYear(e.getFullYear());365>t;){if(n.getTime()>e.getTime())return t;n.setTime(n.getTime()+864e5),t++}return t}(n),W:function(e){var t=0,n=new Date;for(n.setDate(1),n.setMonth(0),n.setYear(e.getFullYear());52>t;){if(n.getTime()>e.getTime())return t;n.setTime(n.getTime()+6048e5),t++}return t}(n),F:this.MONTH_NAMES[n.getMonth()],m:9>n.getMonth()?"0"+(n.getMonth()+1):n.getMonth()+1,M:this.MONTH_NAMES_SHORT[n.getMonth()],n:n.getMonth()+1,t:function(e){var t=new Date;return t.setDate(1),t.setMonth(11>e.getMonth()?e.getMonth()+1:0),t.setYear(11>e.getMonth()?e.getFullYear():e.getFullYear()+1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setTime(t.getTime()-1),t.getDate()}(n),L:function(e){var t=new Date;return t.setDate(1),t.setMonth(2),t.setYear(e.getFullYear()),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setTime(t.getTime()-1),29===t.getDate()?1:0}(n),Y:n.getFullYear(),y:(n.getFullYear()+"").substr(2,2),H:10>n.getHours()?"0"+n.getHours():n.getHours(),i:10>n.getMinutes()?"0"+n.getMinutes():n.getMinutes(),s:10>n.getSeconds()?"0"+n.getSeconds():n.getSeconds(),u:n.getMilliseconds()},l=0;t.length>l;l++)s=t[l],"\\"!==s?a+=r[s]===void 0?s:r[s]:l+=1;return a}},"undefined"!=typeof exports?exports=t.dateFormatter:"function"==typeof define&&define("modo.dateFormatter",function(){return t.dateFormatter})}(),function(){"use strict";function e(e,t){return void 0!==t?n.Template.classNames[e]:n.cssPrefix+n.Template.classNames[e]}function t(e,t,n){e.html(t(n))}var n,i;i=jQuery,"undefined"!=typeof modo?n=modo:"function"==typeof require&&(n=require("modo")),n.defineElement("Template",["mdo-template"],function(i){var o;i=i||{},o=this,n.Element.call(this,i),this.addClass(e(0,!0)),"function"!=typeof i.template&&(i.template=_.template(i.template)),this.set=function(e){return this.stopListening(),e instanceof Backbone.Model?(this.listenTo(e,"change",function(){t(o.el,i.template,e.getJSON()),o.trigger("update")}),t(this.el,i.template,e.getJSON())):t(this.el,i.template,e),this.trigger("update"),this},i.data?this.set(i.data):t(this.el,i.template,{}),n._stat("Template")}).inheritPrototype("Element").extendPrototype({}),"undefined"!=typeof exports?exports=modo.Template:"function"==typeof define&&define("Template",[],function(){return modo.Template})}(),function(){"use strict";function e(e,n){return void 0!==n?t.Notification.classNames[e]:t.cssPrefix+t.Notification.classNames[e]}var t,n;n=jQuery,"undefined"!=typeof modo?t=modo:"function"==typeof require&&(t=require("modo")),t.defineElement("Notification",["notification"],function(n){n=n||{},t.Element.call(this,n),this.addClass(e(0,!1)),this.noAdd=!0,this.el.html(n.content),this.displayTime=n.duration,t._stat("Notification")}).inheritPrototype("Element").extendPrototype({set:function(e){return this.el.html(e),this},hide:function(){return this.visible=!1,this}}),"undefined"!=typeof exports?exports=modo.Notification:"function"==typeof define&&define("Notification",[],function(){return modo.Notification})}(),function(){"use strict";function e(e,n){return void 0!==n?t.NotificationContainer.classNames[e]:t.cssPrefix+t.NotificationContainer.classNames[e]}var t,n;n=jQuery,"undefined"!=typeof modo?t=modo:"function"==typeof require&&(t=require("modo")),t.defineElement("NotificationContainer",["notificationcontainer","pos-","append-"],function(n){function i(){var e,t,u,f;for(u=Date.now(),f=0;o.length&&a>s.length;)e=o.shift(),e.displayedAt=u,void 0===e.displayTime&&(e.displayTime=r),e.el.hide(),"before"===n.append?l.el.prepend(e.el):l.el.append(e.el),d(e.el),e.trigger("show"),s.push(e);for(t=0;s.length>t;t++)e=s[t],(e.displayTime||!e.visible)&&(u>e.displayedAt+e.displayTime||!e.visible)&&(c(e.el),e.trigger("hide"),l.trigger("remove",e),s.splice(t,1),f++,t--);return f?(i(),void 0):((s.length||o.length)&&setTimeout(i,500),s.length||o.length||l.trigger("queueEmpty"),void 0)}n=n||{},t.Element.call(this,n),this.addClass(e(0,!1)),n.position||(n.position="top-right"),this.addClass(e(1,!1)+n.position),"before"!==n.append&&(n.append="after"),this.addClass(e(2,!1)+n.append);var o,s,a,r,l,d,c;l=this,o=[],s=[],a=n.showLimit||Number.POSITIVE_INFINITY,r=n.displayTime||5e3,d=n.showEffect||function(e){e.slideDown()},c=n.hideEffect||function(e){e.slideUp()},t.getRootElement().append(this.el),this.noAdd=!0,this.add=function(e){if(!(e instanceof t.Notification))throw Error("You can only add elements of type modo.Notification");o.push(e),l.trigger("add",e),i()},t._stat("NotificationContainer")}).inheritPrototype("Element").extendPrototype({createNotification:function(e){var n;return n=new t.Notification(e),this.add(n),n}}),"undefined"!=typeof exports?exports=modo.NotificationContainer:"function"==typeof define&&define("NotificationContainer",[],function(){return modo.NotificationContainer})}(),function(){"use strict";function e(e,n){return void 0!==n?t.Slider.classNames[e]:t.cssPrefix+t.Slider.classNames[e]}var t,n;n=jQuery,"undefined"!=typeof modo?t=modo:"function"==typeof require&&(t=require("modo")),t.defineElement("Slider",["slider","slider-vertical","slider-range","slider-value","slider-plug1","slider-plug2"],function(i){function o(e){var t,n,o,s,a;a="vertical"===c.direction,t=(c.value1-c.minValue)/((c.maxValue-c.minValue)/100),c.range?(n=(c.value2-c.minValue)/((c.maxValue-c.minValue)/100),s=t,o=n-t,a?h.css({bottom:n+"%"}):h.css({left:n+"%"}),e||d.trigger("change",[c.value1,c.value2]),i.model&&(i.modelKey&&i.model.set(i.modelKey,c.value1),i.modelKey2&&i.model.set(i.modelKey2,c.value2))):(s=0,o=t,e||d.trigger("change",c.value1),i.model&&i.modelKey&&i.model.set(i.modelKey,c.value1)),a?(u.css({bottom:s+"%",height:o+"%"}),f.css({bottom:t+"%"})):(u.css({left:s+"%",width:o+"%"}),f.css({left:t+"%"}))}function s(e,t){var n,i,s,a,r;s=c["value"+e],"horizontal"===c.direction?(n=d.el.offset().left,i=d.el.width()):(n=d.el.offset().top,i=d.el.height()),n>t&&(t=n),t>i+n&&(t=i+n),"vertical"===c.direction&&(t=n+i-(t-n)),s=c.minValue+(t-n)/(i/100)*((c.maxValue-c.minValue)/100),s=Math.floor(s/c.step)*c.step,r=(""+c.step).split("."),r.length>1&&(a=(""+s).split("."),a.length>1&&a[1].length>r[1].length&&(s=Number(a[0]+"."+a[1].substr(0,r[1].length)))),c.minValue>s&&(s=c.minValue),s>c.maxValue&&(s=c.maxValue),c.range&&(1===e&&s>c.value2&&(a=c.value2,c.value2=s,c.value1=a,m=e=2),2===e&&c.value1>s&&(a=c.value1,c.value1=s,c.value2=a,m=e=1)),c["value"+e]=s,o()}function a(e){l(e),s(m,"horizontal"===c.direction?e.clientX:e.clientY)}function r(){n(document).off("mousemove",a).off("mouseup",r)}function l(e){e.preventDefault(),e.stopPropagation()}i=i||{},t.Element.call(this,i);var d,c,u,f,h,m;if(d=this,c={direction:-1!==_.indexOf(["horizontal","vertical"],i.direction)?i.direction:"horizontal",range:i.range?!0:!1,minValue:i.minValue||0,maxValue:i.maxValue||100,value1:i.value||i.value1||0,value2:i.value2||0,step:i.step||1},i.model){if(c.range?i.modelKey=i.modelKey1:i.value1=i.value,i.modelKey)i.value1=i.model.get(i.modelKey),i.model.on("change:"+i.modelKey,function(){d.set(i.model.get(i.modelKey))});else{if("function"!=typeof i.value1)throw Error("Trying to bind to model, but no modelKey and no valueFunction given");i.model.on("change",function(){d.set(i.value1.call(d,i.model))})}if(c.range)if(i.modelKey2)i.value2=i.model.get(i.modelKey2),i.model.on("change:"+i.modelKey2,function(){d.set(i.model.get(i.modelKey2))});else{if("function"!=typeof i.value2)throw Error("Trying to bind to model, but no modelKey and no valueFunction given");i.model.on("change",function(){d.set(i.value2.call(d,i.model))})}}u=n('<div class="'+e(3)+'"></div>'),f=n('<div class="'+e(4)+'"></div>'),this.el.append(u,f),this.disabled=!1,this.addClass(e(0,!1)),"vertical"===c.direction&&this.addClass(e(1,!1)),c.range&&(this.addClass(e(2,!1)),h=n('<div class="'+e(5)+'"></div>'),this.el.append(h)),this.get=function(){return c.range?[c.value1,c.value2]:c.value1},this.set=function(e,t){return t=t||{silent:!1},c.range?(e.sort(),c.value1=e[0],c.value2=e[1],void 0):(c.value1=e,o(t.silent),this)},this.setMin=function(e){return c.minValue=e,this},this.setMax=function(e){return c.maxValue=e,this},o(!0),this.el.on("mousedown","."+e(4)+",."+e(5),function(t){var i;l(t),d.disabled||(i=n(this),n(document).on("mousemove",a).on("mouseup",r),m=i.hasClass(e(4))?1:2)}),t._stat("Slider")}).inheritPrototype("Element").extendPrototype({disable:function(){return this.addClass(modo.Element.classNames[2]),this.disabled=!0,this.trigger("disabled"),this},enable:function(){return this.removeClass(modo.Element.classNames[2]),this.disabled=!1,this.trigger("enabled"),this}}),"undefined"!=typeof exports?exports=t.Slider:"function"==typeof define&&define("modo-slider",[],function(){return t.Slider})}(),function(){"use strict";function e(e,n){return void 0!==n?t.MultiPicker.classNames[e]:t.cssPrefix+t.MultiPicker.classNames[e]}var t,n;n=jQuery,"undefined"!=typeof modo?t=modo:"function"==typeof require&&(t=require("modo")),t.defineElement("MultiPicker",["multipicker","multipicker-selected","multipicker-button","multipicker-menu","multipicker-menu-container"],function(i){function o(){s._pickMenu.hide(),n(window).off("click",o)}i=i||{},t.Element.call(this,i),this._settings={elements:{},selected:i.selected||[]},this.addClass(e(0,!0));var s=this;this._selectedList=new t.List({data:i.selectedElements||[],className:e(1),itemEvents:{click:function(e,t){e.preventDefault(),e.stopPropagation(),s._settings.selected.splice(t,1),s.update(),s.trigger("change")}},itemRender:function(e,t,n){return s._settings.elements instanceof Backbone.Collection?(n=s._settings.elements.get(e),e=n.toJSON()):e=s._settings.elements[e],i.selectedRender?i.selectedRender(e,t,n):e},emptyRender:i.emptyRender||void 0}),this._pickButton=new t.Button({label:i.buttonLabel||"+",className:e(2)}),this._pickMenu=new t.List({className:e(3),data:this._settings.elements,collector:function(e,t){return this._idRelations=null,t?e.filter(function(e){return-1===_.indexOf(s._settings.selected,e.id||e.cid)}):e instanceof Object&&!(e instanceof Array)?_.omit(e,s._settings.selected):(s._pickMenu._idRelations=[],_.filter(e,function(e,t){return-1===_.indexOf(s._settings.selected,t)?(s._pickMenu._idRelations.push(t),!0):!1}))},itemEvents:{click:function(e,t,n){n instanceof Backbone.Model?s._settings.selected.push(n.id||n.cid):(s._pickMenu._idRelations&&(t=s._pickMenu._idRelations[t]),s._settings.selected.push(t)),s.update(),s.trigger("change"),o()}},itemRender:i.pickMenuRender||void 0,emptyRender:i.pickMenuEmptyRender||void 0}),this._pickMenu.hide(),this._pickButton.on("click",function(){s._pickMenu.show(),setTimeout(function(){n(window).one("click",o)},10)}),this.el.append(this._selectedList.el,'<div class="'+e(4)+'"></div>'),this.el.find("."+e(4)).append(this._pickButton.el,this._pickMenu.el),i.elements&&this.setElements(i.elements),i.selected&&this.set(i.selected,{silent:!0}),t._stat("MultiPicker")}).inheritPrototype("Element").extendPrototype({get:function(){return this._settings.selected},set:function(e,t){return e=_.clone(e),t=t||{silent:!1},e instanceof Array||(e=e?[e]:[]),this._settings.selected=e,this.update(),t.silent||(this.trigger("change",this.get()),this.trigger("change:selected",this.get())),this},setElements:function(e,t){return t=t||{silent:!1},(e instanceof Array||e instanceof Backbone.Collection)&&(this._itemCount=e.length),e instanceof Object&&(this._itemCount=_.keys(e).length),e||(e=[],this._itemCount=0),this._settings.elements=e,this._pickMenu.set(e),this.update(),t.silent||(this.trigger("change",this.getElements()),this.trigger("change:elements",this.getElements())),this},getElements:function(){return this._settings.elements},update:function(){this._selectedList.set(this._settings.selected),this._selectedList.update(),this._pickMenu.update(),this._selectedList.length==this._itemCount?this._pickButton.disable():this._pickButton.enable()}}),"undefined"!=typeof exports?exports=t.MultiPicker:"function"==typeof define&&define("MultiPicker",[],function(){return t.MultiPicker})}(),function(){"use strict";function e(e,n){return void 0!==n?t.TinyMCE.classNames[e]:t.cssPrefix+t.TinyMCE.classNames[e]}var t,n;n="//tinymce.cachefly.net/4.1/tinymce.min.js","undefined"!=typeof modo?t=modo:"function"==typeof require&&(t=require("modo")),t.setLoadCallback("TinyMCE",function(){window.tinymce.baseURL="//tinymce.cachefly.net/4.1/"}),t.defineElement("TinyMCE",["tinymce","textarea"],function(n){n=n||{},t.Element.call(this,n),this.addClass(e(0,!0)),this._instanceIdentifier=this.modoId+"-"+e(1,!0),this.el.append('<textarea id="'+this._instanceIdentifier+'" class="'+this._instanceIdentifier+'"></textarea>'),this._tinyMCE=null,this._textarea=this.el.find("textarea"),this._waitForDom=null,n.config=n.config||{},n.config.selector="textarea."+this._instanceIdentifier,n.config.setup=function(e){e.on("change",function(){e.save(),i.trigger("change",e.getContent())}),i._tinyMCE=e},n.config.init_instance_callback=function(e){e.setContent($(i._textarea).val())};var i=this;t.setLoadCallback(this,function(){t.waitForDom(i,function(){window.tinymce.init(n.config)})}),t._stat("TinyMCE")}).requireLibrary([n,window.tinymce]).inheritPrototype("Element").extendPrototype({get:function(){return this._tinyMCE?this._tinyMCE.getContent():$(this._textarea).val()},set:function(e,t){return t=t||{},this._tinyMCE?(this._tinyMCE.setContent(e),t.silent||this.trigger("change",e),this):($(this._textarea).val(e),t.silent||this.trigger("change",e),this)}}),"undefined"!=typeof exports?exports=t.TinyMCE:"function"==typeof define&&define("TinyMCE",[],function(){return t.TinyMCE})}(),function(){"use strict";function e(e,n){return void 0!==n?t.AceEditor.classNames[e]:t.cssPrefix+t.AceEditor.classNames[e]}var t,n;n="//oss.maxcdn.com/ace/1.1.7/min/ace.js","undefined"!=typeof modo?t=modo:"function"==typeof require&&(t=require("modo")),t.defineElement("AceEditor",["aceEditor"],function(n){n=n||{},t.Element.call(this,n),this.addClass(e(0,!0));var i=this;this._params=n,this._editor=null,this._textarea=$("<textarea></textarea>"),this.el.append(this._textarea),this._textarea.val(n.value||""),t.setLoadCallback(this,function(){t.waitForDom(i,function(){i._editor=window.ace.edit(i.el[0]),i._editor.setValue(i._textarea.val()),i._textarea.remove(),i._editor.setTheme("ace/theme/"+(i._params.theme||"chrome")),i._editor.getSession().setMode("ace/mode/"+(i._params.mode||"html")),i._editor.getSession().setUseWrapMode(!0),i._editor.setShowPrintMargin(!1),i._editor.on("change",function(){i.trigger("change")}),i.on("show",function(){i._editor.resize(!0)}),i.on("hide",function(){i._editor.resize(!1)})})}),t._stat("AceEditor")}).requireLibrary([n,window.ace]).inheritPrototype("Element").extendPrototype({setMode:function(e,t){return t=t||{},this._editor?(this._editor.getSession().setMode("ace/mode/"+e),t.silent||this.trigger("changeMode",e),this):(this._params.mode=e,t.silent||this.trigger("changeMode",e),this)},get:function(){return this._editor?this._editor.getValue():$(this._textarea).val()},set:function(e,t){return t=t||{},this._editor?(this._editor.setValue(e),t.navigateFileStart!==!1&&this._editor.navigateFileStart(),t.silent||this.trigger("change",e),this):($(this._textarea).val(e),t.silent||this.trigger("change",e),this)},resize:function(){return this._editor?(this._editor.resize(),this):void 0}}),"undefined"!=typeof exports?exports=t.AceEditor:"function"==typeof define&&define("AceEditor",[],function(){return t.AceEditor})}(),function(){"use strict";function e(){var e=modo.generate([{type:"PopUp",ref:"window",params:{modal:!0,className:"mdo-popbox",closeOnBackdrop:!1},children:[{type:"Container",params:{className:"tme-header"},children:[{type:"Label",ref:"lblTitle",params:{className:"tme-title"}}]},{type:"Container",params:{className:"tme-content"},children:[{type:"Label",ref:"lblMessage",params:{className:"tme-infobox"}},{type:"InputText",hidden:!0,ref:"txtInput",on:{"keydown:enter":function(){e.deferred.resolve(this.get()),e.window.close()}}}]},{type:"Container",params:{className:"tme-footer"},children:[{type:"Button",ref:"btnCancel",on:{click:function(){e.deferred.reject(),e.window.close()}}},{type:"Button",ref:"btnConfirm",params:{className:""},on:{click:function(){return e.txtInput.visible?(e.deferred.resolve(e.txtInput.get()),e.window.close(),void 0):(e.deferred.resolve(),e.window.close(),void 0)}}}]}]}]);return e}function t(e,t,n){var o,s;o=i.CONFIRM_BUTTON,s=i.CANCEL_BUTTON,e.deferred=n,e.lblTitle.set(t.title),e.lblMessage.set(t.message?t.message.replace(/\n/g,"<br>"):t),e.btnConfirm.setLabel(t.btnConfirm||o),e.btnCancel.setLabel(t.btnCancel||s).focus(),e.window.open(),e.window.on("close",function(){"resolved"!==n.state()&&n.reject(),e.window.el.remove()})}var n,i;"undefined"!=typeof modo?n=modo:"function"==typeof require&&(n=require("modo")),n.popBox=i={ALERT_TITLE:"Heads up!",CONFIRM_TITLE:"Are you sure?",PROMPT_TITLE:"Heads up!",CONFIRM_BUTTON:"Okay",CANCEL_BUTTON:"Cancel",alert:function(n){var o=jQuery.Deferred(),s=e();return"object"!=typeof n&&(n={title:i.ALERT_TITLE,message:n}),n.title=n.title||i.ALERT_TITLE,s.btnCancel.hide(),s.txtInput.hide(),t(s,n,o),s.btnConfirm.focus(),o.promise()},confirm:function(n){var o=jQuery.Deferred(),s=e();return"object"!=typeof n&&(n={title:i.CONFIRM_TITLE,message:n}),n.title=n.title||i.CONFIRM_TITLE,s.btnCancel.show(),s.txtInput.hide(),t(s,n,o),s.btnCancel.focus(),o.promise()},prompt:function(n){var o=jQuery.Deferred(),s=e();return"object"!=typeof n&&(n={title:i.PROMPT_TITLE,message:n}),n.title=n.title||i.PROMPT_TITLE,s.txtInput.el[0].type=n.type||"text",s.txtInput.el[0].placeholder=n.placeholder||"",s.txtInput.set(n.value||""),s.btnCancel.show(),s.txtInput.show().set(""),t(s,n,o),s.txtInput.focus(),o.promise()}},n.alert=i.alert,n.confirm=i.confirm,n.prompt=i.prompt,n.popBox=i,"undefined"!=typeof exports?exports=i:"function"==typeof define&&define("test",[],function(){return i})}(),function(){"use strict";function e(e,n){return void 0!==n?t.Uploader.classNames[e]:t.cssPrefix+t.Uploader.classNames[e]}var t;"undefined"!=typeof modo?t=modo:"function"==typeof require&&(t=require("modo")),t.defineElement("Uploader",["uploader","uploader-button","uploader-status","uploader-uploading","uploader-selected"],function(n){function i(){if(o.enabled)if(o._settings.ajax){for(var n=o.el.find(".ulProbe")[0].files,i=new FormData,s=0;n.length>s;s++)i.append("file[]",n[s],n[s].name);var a=new XMLHttpRequest;a.upload.addEventListener("progress",function(e){o.trigger("upload:progress",{total:e.total,loaded:e.loaded,percent:100*(e.loaded/e.total)})},!1),a.addEventListener("load",function(n){o.removeClass(e(3,!0)),o.el.find("."+e(1)).removeClass(t.cssPrefix+t.Element.classNames[2]),o.clear({silent:!0}),o.trigger("upload:finish",n.target.responseText)},!1),a.addEventListener("error",function(n){o.removeClass(e(3,!0)),o.el.find("."+e(1)).removeClass(t.cssPrefix+t.Element.classNames[2]),o.clear({silent:!0}),o.trigger("upload:error",n.target.responseText)}),a.open("POST",o._settings.target,!0),a.send(i),o.addClass(e(3,!0)),o.el.find("."+e(1)).addClass(t.cssPrefix+t.Element.classNames[2]),o.trigger("upload:start")}else o.el.find("iframe").one("load",function(){var n=$(this.contentWindow.document.body).text();o.removeClass(e(3,!0)),o.el.find("."+e(1)).removeClass(t.cssPrefix+t.Element.classNames[2]),o.trigger("upload:finish",n),o.clear({silent:!0})}),o.el.find("form").attr("action",o._settings.target).submit(),o.addClass(e(3,!0)),o.el.find("."+e(1)).addClass(t.cssPrefix+t.Element.classNames[2]),o.trigger("upload:start")}n=n||{};var o=this;t.Element.call(this,n),this.addClass(e(0,!0)),window.FormData||(n.ajax=!1),this._settings={target:n.target,mimeFilter:n.mimeFilter||"",autostart:void 0!==n.autostart?n.autostart!==!1:!1,ajax:void 0!==n.ajax?n.ajax!==!1:!1,multiple:n.multiple===!0},this.enabled=!0;var s='<a href="#ulTarget-'+this.modoId+'" class="'+(t.cssPrefix+t.Button.classNames[0])+" "+e(1)+'">'+(n.label||"Upload");s+='<form action="'+this._settings.target+'" target="ulTarget-'+this.modoId+'" enctype="multipart/form-data" method="post" class="ulForm"><input accept="'+this._settings.mimeFilter+'" class="ulProbe" type="file'+(n.multiple?"[]":"")+'" name="file"></form>',s+='</a><span class="'+e(2)+'"></span>',this.el.append(s),this._status=this.el.find("."+e(2)),this._settings.ajax||this.el.append('<iframe name="ulTarget-'+this.modoId+'"></iframe>'),this.el.find(".ulProbe").on("change",function(){return $(this).val()?($(this).addClass(e(4,!0)),o._settings.autostart&&i(),o.trigger("change",o.el.find(".ulProbe")[0].files),void 0):($(this).removeClass(e(4,!0)),void 0)}),this.upload=function(){return this.el.find(".ulProbe").val()?(i(),this):this},this.clear=function(e){return e=e||{},o.el.find(".ulProbe").val(""),e.silent||o.trigger("clear"),this},this.getFiles=function(){return o.el.find(".ulProbe").val()}}).inheritPrototype("Element").extendPrototype({setStatus:function(e){return this._status.html(e),this},setTarget:function(e){return this.el.find("iframe").attr("target",e),this._settings.target=e,this},enable:function(){return this.removeClass(modo.Element.classNames[2]),this.enabled=!0,this.el.find(".ulProbe").show(),this},disable:function(){return this.addClass(modo.Element.classNames[2]),this.enabled=!1,this.el.find(".ulProbe").hide(),this}}),"undefined"!=typeof exports?exports=t.Uploader:"function"==typeof define&&define("Uploader",[],function(){return t.Uploader})}();